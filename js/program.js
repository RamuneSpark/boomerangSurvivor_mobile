let useSocket=1,socket=null;function socketEmit(e,t){null!==socket&&socket.emit(e,t)}function socketOn(e,t){null!==socket&&socket.on(e,t)}"function"==typeof io&&1===useSocket&&(socket=io("https://boomerangsurvivor-mobile-serverdata.onrender.com/",{path:"/socket.io",transports:["websocket","polling"]}));const screen=document.getElementById("screen");function createDiv(e){var t=document.createElement("div");return t.id=e,document.body.appendChild(t),imgElement=document.createElement("img"),t.appendChild(imgElement),imgElement.style.display="none",t}function setImage(e,t){let n=e.getElementsByTagName("img")[0];"block"!==n.style.display&&(n.style.display="block"),!1===n.src.endsWith(t)&&(n.src=t,n.onload=function(){n.width===n.naturalWidth&&n.height===n.naturalHeight||(n.width=n.naturalWidth,n.height=n.naturalHeight)})}function setImageWidth(e,t,n){let a=e.getElementsByTagName("img")[0];"block"!==a.style.display&&(a.style.display="block"),!1===a.src.endsWith(t)&&(a.src=t),a.width!==n&&(a.width=n,a.onload=function(){a.height!==n*(a.naturalHeight/a.naturalWidth)&&(a.height=n*(a.naturalHeight/a.naturalWidth))})}function setText(e,t){setText2(e,"<nobr>"+t+"</nobr>")}function setText2(e,t){e.innerHTML!=="<span>"+t+"</span>"&&(e.innerHTML="<span>"+t+"</span>")}function Remove(t){var n=t.childNodes;for(let e=n.length-1;0<=e;e--){var a=n[e];a.nodeType===Node.ELEMENT_NODE&&"img"===a.tagName.toLowerCase()?(a.removeAttribute("src"),"none"!==a.style.display&&(a.style.display="none"),0===a.width&&0===a.height||(a.width=0,a.height=0)):a.nodeType===Node.ELEMENT_NODE&&"span"===a.tagName.toLowerCase()&&(t.innerHTML="")}}function putXY(e,t,n){"no"!==t&&(isNaN(t)?e.style.left=t:e.style.left=t+"px"),"no"!==n&&(isNaN(n)?e.style.top=n:e.style.top=n+"px")}const Center="-50%",Left="0%",Top=Left,Right="-100%",Bottom=Right;function translate(e,t,n){e.style.transform="translate("+t+", "+n+") rotate(0deg) scale(100%)"}function transform(e,t,n,a,i){e.style.transform="translate("+t+", "+n+") rotate("+a+"deg) scale("+i+"%)"}function Rb(e,t){return"<ruby>"+e+"<rt>"+t+"</rt></ruby>"}function fontSet(e,t,n,a,i,o){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t?t="#FFC6BB":"sys"==t&&(t="#FFBCD3"),e.style.color!==t&&(e.style.color=t),e.style.fontFamily!==n&&(e.style.fontFamily=n),e.style.fontSize!==a&&(isNaN(a)?e.style.fontSize=a:e.style.fontSize=a+"px"),e.style.fontWeight!==i&&(e.style.fontWeight=i),e.style.textAlign!==o&&(e.style.textAlign=o)}function fontColorSet(e,t){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t?t="#FFC6BB":"sys"==t&&(t="#FFBCD3"),e.style.color!==t&&(e.style.color=t)}function textEdge(e,a,i){if(0!=a){"green"==i?i="#17890B":"blue"==i?i="#012DD4":"red"==i?i="#CE2807":"sys"==i&&(i="#CE1658");let n="";for(let t=0;t<16;t++)for(let e=1;e<=a;e++){var o=2*Math.PI*(t/16),r=Math.cos(o)*e,o=Math.sin(o)*e;1===e&&0===t||(n+=","),n+=r+"px "+o+"px 0px "+i}e.style.textShadow!==n&&(e.style.textShadow=n)}else 0==a&&""!==e.style.textShadow&&(e.style.textShadow="")}let allDiv=[];function defaultSet(e,t){t.appendChild(e),allDiv.push(e),e.style.position="absolute"}let specialPhone=!1,phone,os;function phoneCheck(){os=navigator.userAgent.match(/iPhone|iPad|Android.+Mobile|Android/)||specialPhone?(phone=!0,navigator.userAgent.match(/iPhone|iPad/)?"iOS":"others"):(phone=!1,"others")}function Vector(e,t,n,a){var i={},n=n-e,e=a-t,a=n*n+e*e;return 0==(a=Math.sqrt(a))?(i.x=0,i.y=1,i.z=1,i.zz=0):(i.x=n/a,i.y=e/a,i.z=a,i.zz=a),i}function Vector2(e,t,n,a){var i={},n=n-e,e=a-t,a=n*n+e*e;return 0==(a=Math.sqrt(a))?(i.x=0,i.y=1,i.z=1,i.zz=0):(i.x=n,i.y=e,i.z=a,i.zz=a),i}function Vector3(e,t,n,a){n-=e,e=a-t;let i;return Math.abs(e)>Math.abs(n)?i=0<=e?"down":"up":Math.abs(e)<Math.abs(n)?i=0<n?"right":"left":((i=[])[0]="diagonal",i[1]=0<=e?"down":"up",i[2]=0<n?"right":"left"),console.log(i),i}function touch(e,t,n=null,a=null){let i=null;e.addEventListener("touchstart",function(e){e.preventDefault(),i=e.changedTouches[0].identifier,t(e)}),n&&e.addEventListener("touchmove",function(e){i===e.changedTouches[0].identifier&&n(e)}),a&&e.addEventListener("touchend",function(e){i===e.changedTouches[0].identifier&&a(e)})}function touchElement(e,t){var n=[];let a=!1,i=!1,o=!1;return n[1]=e.getBoundingClientRect(),n[2]=t.getBoundingClientRect(),n[1].top<n[2].top&&(n[2]=e.getBoundingClientRect(),n[1]=t.getBoundingClientRect()),n[2].bottom>n[1].top&&(a=!0),n[1]=e.getBoundingClientRect(),n[2]=t.getBoundingClientRect(),n[2].left<n[1].left&&(n[2]=e.getBoundingClientRect(),n[1]=t.getBoundingClientRect()),n[1].right>n[2].left&&(i=!0),o=1==i&&1==a}function touchElement2(e,t){var n=[],a=touchElement(e,t);let i=!1;n[1]=e.getBoundingClientRect(),n[2]=t.getBoundingClientRect();e=[];return e[1]={},e[2]={},1==a&&(e[1].y=(n[1].top+n[1].bottom)/2,e[2].y=(n[2].top+n[2].bottom)/2,e[1].x=(n[1].left+n[1].right)/2,e[2].x=(n[2].left+n[2].right)/2,i=Vector3(e[2].x,e[2].y,e[1].x,e[1].y)),i}function Random(e){let t;var n;return playerPlayState()?(n=(1103515245*(n=e%(e=2147483648))+12345)%e,(t=n/(e-1))<0?t=1-(t=(t*=-t)-Math.floor(t)):1<t&&(t-=Math.floor(t))):t=Math.random(),t}function Seed(e){let t;return(t=(t=((t=([55,82,10,92,44,88,73,25,2,98][player.speedLevel]+[35,91,16,48,22,104,37,54,0,130][player.weaponLevel]+[1,4,7,2,9][weapon.m])/([23,105][player.big]+[44,-33][player.heart])*100)+(commaTime*Math.PI+score/33))*e)*(1/(time.k+2)+.3))<0&&(t=-t,t=Math.sqrt(e)),t}function player_X_Random(){let t=0;var n=[33,66,28,462,509,33,129,77,30,303,625];for(let e=1;e<=10;e++)if(player.x<54*e){t=n[e];break}return t}function escape(e){return e.replace(/&/g,"＆").replace(/</g,"＜").replace(/>/g,"＞").replace(/"/g,"”").replace(/'/g,"’").replace(/=/g,"＝").replace(/`/g,"‘").replace(/\(/g,"（").replace(/\)/g,"）")}phoneCheck();const queryString=window.location.search,urlParams=new URLSearchParams(queryString),theme=urlParams.get("code"),playerName=["maple","origin","halloween"],mapleSkinName=["maple","origin","halloween"];let pN=0;for(let e=0;e<playerName.length;e++)if(playerName[e]===theme){pN=e;break}const bgTheme=bgTheme_F();function bgTheme_F(){return["maple","maple","halloween"][pN]}const itemTheme=itemTheme_F();function itemTheme_F(){return["item","item","hItem"][pN]}const titleTheme=titleTheme_F();function titleTheme_F(){return playerName[pN]}const mapleTheme=mapleTheme_F();function mapleTheme_F(){return mapleSkinName[pN]}const usaraTheme=usaraTheme_F();function usaraTheme_F(){return["","","h"][pN]}function cardTheme(){return playerName[pN]}function cardMissTheme(){return["maple","origin","maple"][pN]}function clearCardTextColor(){return["#396894","#AF2D51","#FFFFFF"][pN]}function clearCardTextEdge(){return surviveTime()===60*startMinute?[1,1,0][pN]:1}let userName=load_saveData("boomerangSurvivorMobile_846472726013"),nameChange=(null===userName&&(userName="メイプル"),0);function clearCard(){0===nameChange?nameInput(0,"card"):getClearCard()}function onlineGo(){0===nameChange?nameInput(0,"online"):inputCheck("online")}const swalWhite="#DDDDDD",swalBlack="#0A3952";function typeNumber(e){return"card"===e?0:"online"===e?1:void 0}function checkhanAndAlpha(e){return/[\uFF61-\uFF9F]/.test(e)||/[Ａ-Ｚａ-ｚ]/.test(e)}function nameInput(e,t){Swal.fire({title:"ユーザーネーム入力",target:screen,html:'<p style="text-align: left; font-size:1.2em ">'+(["記録カードに表示する名前を入れてください。","オンラインランキングに登録する名前を入れてください。"][typeNumber(t)]+["","<br><span style='color: #FF0000;'>※15文字以上の名前は使用できません！</span>","<br><span style='color: #FF0000;'>※半角カナ、全角アルファベットは使用できません！</span>"][e])+"</p>",allowOutsideClick:!1,input:"text",inputValue:userName,showCancelButton:!0,confirmButtonText:"次へ",cancelButtonText:"キャンセル",confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",background:swalWhite,color:swalBlack,reverseButtons:!0,didOpen:()=>{Swal.getPopup().style.borderRadius="50px";var e=document.querySelector(".swal2-confirm"),e=(e.style.fontWeight="bold",e.style.fontSize="1.4em",e.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite},showClass:{popup:`
            animate__animated
            animate__fadeInRight
            animate__faster
          `},hideClass:{popup:`
            animate__animated
            animate__fadeOutDown
            animate__faster
          `}}).then(e=>{e.isConfirmed&&e.value.length<=14&&!1===checkhanAndAlpha(e.value)?(soundCh[0]="ogg/se/confirm.ogg",userName=0!==e.value.length&&e.value.trim()?e.value:"メイプル",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutUp"),userName=escape(userName),inputCheck(t)):e.isConfirmed&&e.value.length<=14?(soundCh[0]="ogg/se/confirm.ogg",userName=e.value,userName=escape(userName=String(userName)),nameInput(2,t)):e.isConfirmed?(soundCh[0]="ogg/se/confirm.ogg",userName=escape(userName=e.value),nameInput(1,t)):(Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"),userName=escape(userName))})}function inputCheck(t){Swal.fire({title:"確認",target:screen,html:'<p style="text-align: left; font-size:1.2em "><span style="font-weight: bold ;color: #396894;">'+userName+"</span><br><br>"+["上記の名前で記録カードを作成します。<br>よろしいですか？","上記の名前でオンラインランキングに登録します。<br><span style='font-weight: bold ;color: #FF0000;'>一度登録した記録は、あなたの操作で後から取り消すことはできません。</span><br>よろしいですか？"][typeNumber(t)]+"</p>",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"はい！",cancelButtonText:"キャンセル",confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",background:swalWhite,color:swalBlack,reverseButtons:!0,didOpen:()=>{Swal.getPopup().style.borderRadius="50px";var e=document.querySelector(".swal2-confirm"),e=(e.style.fontWeight="bold",e.style.fontSize="1.4em",e.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite},showClass:{popup:`
            animate__animated
            animate__fadeInRight
            animate__faster
          `},hideClass:{popup:`
            animate__animated
            animate__fadeOutDown
            animate__faster
          `}}).then(e=>{e.isConfirmed?(soundCh[0]="ogg/se/confirm.ogg",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutUp"),nameChange=1,save_saveData("boomerangSurvivorMobile_846472726013",userName),"card"===t?(saveResultAccident(),getClearCard()):"online"===t&&(send(),saveResultAccident())):(Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"),0===nameChange&&nameInput(0,t))})}let playerID=load_saveData("boomerangSurvivorMobile_279554320123");function send(){onlineSet=1,socketEmit("playData",{id:playerID,mode:startMinute,svTime:surviveTime(),timeDisplay:timeTextDisplay(time.p),name:userName,scoreDisplay:scoreSet(),score:score,mTheme:mapleTheme})}async function getClearCard(){button[2].opacity=.31;var e=document.createElement("canvas");const o=e.getContext("2d");e.width=1200,e.height=675;let t,r=[t=surviveTime()===60*startMinute?"image/clearCard/"+startMinute+"m_"+cardTheme()+"_clear.jpg":"image/clearCard/"+startMinute+"m_"+cardMissTheme()+"_miss.jpg"];const s=["C"],m=[{x:600,y:337.5}];for(let i=0;i<r.length;i++)await new Promise((n,e)=>{const a=new Image;a.onload=function(){let e;"C"===s[i]?e=m[i].x-a.width/2:"L"===s[i]?e=m[i].x:"R"===s[i]&&(e=m[i].x-a.width);var t=m[i].y-a.height/2;o.drawImage(a,e,t,a.width,a.height),n()},a.onerror=e,a.src=r[i]});var n=[];surviveTime()===60*startMinute?o.fillStyle=clearCardTextColor():o.fillStyle="#7835A3",o.strokeStyle="#FFFFFF",o.lineJoin="round",o.lineWidth=14,o.font="bold 55px Higashi",o.textAlign="right",o.textBaseline="top",n[0]=scoreSet(),clearCardTextEdge()&&o.strokeText(n[0],540,345),o.fillText(n[0],540,345),o.lineWidth=7,o.font="bold 30px Higashi",o.textAlign="right",o.textBaseline="bottom",n[1]=userName,clearCardTextEdge()&&o.strokeText(n[1],1175,577),o.fillText(n[1],1175,577),n[2]=displayDate(1),clearCardTextEdge()&&o.strokeText(n[2],1175,544),o.fillText(n[2],1175,544),o.font="bold 25px Higashi",o.textAlign="right",o.textBaseline="top",o.fillStyle="#FFFFFF";let a;a=surviveTime()===60*startMinute?"最後までクリアー":"残りタイム　"+timeTextDisplay(time.p),n[3]=a,o.fillText(n[3],1175,100);n=document.createElement("a");n.download="boomerangSurvivorMobile_ClearCard_"+displayDate(0)+".jpg",n.href=e.toDataURL("image/jpeg",.6),n.click(),setTimeout(()=>{button[2].opacity=1},1e3)}socketOn("id",e=>{save_saveData("boomerangSurvivorMobile_279554320123",playerID=e)});let dateInfo=getDateData(),dateValue=getDateValue();function displayDate(e){var t=dateInfo;return 1===e?t.y+"-"+t.m+"-"+t.d+" ["+t.day+"] "+t.ampm+" "+t.hour+":"+t.minute:0===e?t.y+"-"+t.m+"-"+t.d+"_"+t.h+"-"+t.minute:void 0}function getDateValue(){return Date.now()}function getDateData(){var e={},t=new Date;return e.y=getLastFourDigits(t.getFullYear()),e.m=t.getMonth()+1,e.d=t.getDate(),e.day=["SUN","MON","TUE","WED","THU","FRI","SAT"][t.getDay()],e.h=t.getHours(),e.hour=e.h%12,e.ampm=["AM","PM"][Math.floor(e.h/12)],e.minute=t.getMinutes(),1e4<=e.y&&(e.y=9999),e.y<10&&(e.y="0"+e.y),e.m<10&&(e.m="0"+e.m),e.d<10&&(e.d="0"+e.d),e.hour<10&&(e.hour="0"+e.hour),e.h<10&&(e.h="0"+e.h),e.minute<10&&(e.minute="0"+e.minute),e}function getLastFourDigits(e){let t=e.toString().slice(-4);for(;t.length<4;)t="0"+t;return t}function animeFrame(e,t,n){return e.k++,e.k>=t&&(e.k=0,e.p++),e.p>=n&&(e.p=0),e}function animeFrameEnd(e,t,n,a){return e.k++,e.k>=t&&(e.k=0,e.p++),e.p>=n&&(e.p=0,e.k=0,a()),e}function frameReset(e){return e.p=0,e.k=0,e}let sound=0,audioContext=null,channels=[],soundCh=[];for(let e=0;e<9;e++)channels[e]=null,soundCh[e]=null;function soundPlayer(){if(1===sound)for(let e=0;e<9;e++)null!==soundCh[e]&&("stop"===soundCh[e]?stopSound(e):"ogg/se/confirm.ogg"===soundCh[e]||"ogg/se/select.ogg"===soundCh[e]||"ogg/se/throw.ogg"===soundCh[e]||"ogg/se/item.ogg"===soundCh[e]||"ogg/se/defeatEnemy.ogg"===soundCh[e]?playSound(e,soundCh[e],1,!1):"ogg/se/miss.ogg"===soundCh[e]?playSound(e,soundCh[e],.51,!1):"ogg/bgm/main0.ogg"===soundCh[e]||"ogg/bgm/main1.ogg"===soundCh[e]?playSound(e,soundCh[e],.42,!0):"ogg/bgm/main2.ogg"===soundCh[e]?playSound(e,soundCh[e],.43,!0):"ogg/bgm/main3.ogg"!==soundCh[e]&&("ogg/bgm/result.ogg"===soundCh[e]?playSound(e,soundCh[e],.42,!0):"ogg/se/twinkle.ogg"===soundCh[e]?playSound(e,soundCh[e],.5,!1):"ogg/se/pause.ogg"===soundCh[e]||"ogg/se/finish.ogg"===soundCh[e]?playSound(e,soundCh[e],.7,!1):"ogg/se/scoreOK.ogg"===soundCh[e]&&playSound(e,soundCh[e],.9,!1)),soundCh[e]=null);else for(let e=0;e<9;e++)soundCh[e]=null}function playSound(n,e,a,i){null!==channels[n]&&1!==channels[n]&&stopSound(n),channels[n]=1,fetch(e).then(e=>e.arrayBuffer()).then(e=>audioContext.decodeAudioData(e)).then(e=>{var t=audioContext.createBufferSource(),e=(t.buffer=e,t.loop=i,audioContext.createGain());e.gain.value=a,t.connect(e),e.connect(audioContext.destination),(channels[n]=t).start(0),t.onended=()=>{channels[n]=null}}).catch(e=>console.error("Error fetching or decoding audio:",e))}function stopSound(e){channels[e]&&(channels[e].stop(),channels[e]=null)}screen.style.opacity=1;let scene,nextScene=void 0,bs=101,shift=0,change=0,change_level=.2,change_time=0;function blackout(){100==(bs=null!=nextScene&&100!=bs&&101!=bs&&-100!=bs&&-99!=bs&&-98!=bs?100:bs)?(change-=change_level)<=0&&(change=0,bs=101):101==bs?1<=++change_time&&(scene=nextScene,change_time=0,bs=-100,shift=0,RemoveAll()):-100==bs?2===loadMark&&2===loadMarkSound&&setTimeout(()=>{bs=-99,loadMark=0,loadMarkSound=0},100):-99==bs&&1<=(change+=change_level)&&(change=1,bs=0,nextScene=void 0),screen.style.opacity!==change&&(screen.style.opacity=change)}function load(e){if(0===loadMark)if(null!==e){loadMark=1;let a=0;const i=e.length,o=[];e.forEach((e,t)=>{const n=new Image;n.src=e,n.onload=()=>{a++,o[t]=n,a>=i&&(loadMark=2)},n.onerror=()=>{console.log("ロード失敗: "+e)}})}else loadMark=2}function load2(e){if(null!==e){let a=0;const i=e.length,o=[];e.forEach((e,t)=>{const n=new Image;n.src=e,n.onload=()=>{a++,o[t]=n,a,i},n.onerror=()=>{console.log("ロード失敗: "+e)}})}}function loadSound(e){0===loadMarkSound&&(null!==e&&1===sound?(e=e.map(e=>fetch(e).then(e=>e.arrayBuffer()).then(e=>audioContext.decodeAudioData(e))),loadMarkSound=1,Promise.all(e).then(()=>{loadMarkSound=2}).catch(e=>{console.error("Error loading audio files:",e)})):loadMarkSound=2)}function loadSound2(e){1===sound&&(null===audioContext&&(audioContext=new(window.AudioContext||window.webkitAudioContext)),e=e.map(e=>fetch(e).then(e=>e.arrayBuffer()).then(e=>audioContext.decodeAudioData(e))),Promise.all(e).then(()=>{}).catch(e=>{console.error("Error loading audio files:",e)}))}let loadMark=0,loadMarkSound=0;function beforeScene(){return-100===bs||101===bs}let mouseX,mouseY,mouseC="no";screen.addEventListener("mousedown",e=>{mouseC="click!"}),screen.addEventListener("mouseup",e=>{mouseC="no"}),screen.addEventListener("mousemove",e=>{e.preventDefault,mouseX=e.offsetX,mouseY=e.offsetY});const fps=50,fps2=1e3/fps;function move(){monitorResize(),run(),blackout(),soundPlayer(),!1===phone&&redirectPC()}const div_touchScreen=createDiv("touchScreen");defaultSet(div_touchScreen,screen),putXY(div_touchScreen,"50%","100%"),translate(div_touchScreen,Center,Bottom),div_touchScreen.style.zIndex=0,div_touchScreen.style.overflow="hidden",setImage(div_touchScreen,"");let touchScreenY=100;const div_touchScreenBG=createDiv("touchScreenBG");defaultSet(div_touchScreenBG,div_touchScreen),putXY(div_touchScreenBG,"50%","100%"),translate(div_touchScreenBG,Center,Bottom),div_touchScreenBG.style.zIndex=0,div_touchScreenBG.style.overflow="hidden",setImage(div_touchScreenBG,"");let touchMark={x:null,y:null};const div_touchWidthMark=createDiv("touchWidthMark"),div_touchHeightMark=(defaultSet(div_touchWidthMark,div_touchScreen),putXY(div_touchWidthMark,"50%","50%"),translate(div_touchWidthMark,Center,Center),div_touchWidthMark.style.zIndex=3,setImage(div_touchWidthMark,""),createDiv("touchHeightMark")),div_touchScreenPause=(defaultSet(div_touchHeightMark,div_touchScreen),putXY(div_touchHeightMark,"50%","50%"),translate(div_touchHeightMark,Center,Center),div_touchHeightMark.style.zIndex=3,setImage(div_touchHeightMark,""),createDiv("touchScreenPause"));defaultSet(div_touchScreenPause,div_touchScreen),putXY(div_touchScreenPause,"50%","0%"),translate(div_touchScreenPause,Center,Bottom),div_touchScreenPause.style.zIndex=1e3,div_touchScreenPause.style.overflow="hidden",setImage(div_touchScreenPause,"");let throwButton={},touchNow=0;function useTouchDisplay(){-100===bs&&(screen.appendChild(div_touchScreen),translate(div_touchScreen,Center,Bottom),div_touchScreen.style.transformOrigin="center",putXY(div_touchScreen,"50%","100%"),touchMark={x:null,y:null,lx:null,ly:null},setImage(div_touchScreen,"image/touchScreenBase.webp"),setImageWidth(div_touchScreenPause,"image/touchScreenPause.webp",540),touchNow=0),null===touchMark.x||null===touchMark.y?(Remove(div_touchWidthMark),Remove(div_touchHeightMark)):(putXY(div_touchWidthMark,touchMark.x+"px","50%"),putXY(div_touchHeightMark,"50%",touchMark.y+"px"),setImage(div_touchWidthMark,"image/touchWidthMark.webp"),setImage(div_touchHeightMark,"image/touchHeightMark.webp")),0===pause?touchScreenY=0:1===pause?100<=(touchScreenY+=7)&&(touchScreenY=100,pause=2):3===pause&&(touchScreenY-=7)<=0&&(touchScreenY=0,pause=0),putXY(div_touchScreenPause,"50%",touchScreenY+"%"),setImage(div_touchScreenBG,"image/touchScreen.webp")}function touchShot(){touchMark.y-touchMark.ly<-8&&(Math.abs(touchMark.x-touchMark.lx)<20||Math.abs(touchMark.x-touchMark.lx)*Math.tan(Math.PI/180*38)<Math.abs(touchMark.y-touchMark.ly))&&(0!==weapon.m&&3!==weapon.m||(weapon.m=1,weapon.stop=5))}function touchScreenEnd(){touchNow=4*fps,touchMark={x:null,y:null},"walk"==player.state&&(player.state="stop"),3===weapon.m&&(weapon.m=0)}function touchScreenLocation(e,t){var n={},a=div_touchScreen.getBoundingClientRect(),i=div_touchScreen.offsetWidth/a.width,o=div_touchScreen.offsetHeight/a.height,i=(e.changedTouches[0].clientX-a.left)*i,e=(e.changedTouches[0].clientY-a.top)*o;return null!==t?(n.lx=t.x,n.ly=t.y):(n.lx=i,n.ly=e),n.x=i,n.y=e,n}touch(div_touchScreen,e=>{0===pause&&"game"===scene&&(touchNow=1e4,e=touchScreenLocation(e,null),touchMark=e)},e=>{0===pause&&"game"===scene&&(touchMark=touchScreenLocation(e,touchMark),touchShot())},()=>{"game"===scene&&touchScreenEnd()});const buttonMax=12,shareButton=6;function allButtonLength(){return buttonMax+shareButton}let button=[],div_button=[];for(let e=0;e<allButtonLength();e++)button[e]={x:0,y:0,m:0,filter:0,hit:0,opacity:1},div_button[e]=createDiv("button"+e),defaultSet(div_button[e],screen),putXY(div_button[e],100,100*e),translate(div_button[e],Center,Center),div_button[e].style.zIndex=50,div_button[e].style.mixBlendMode="normal",setImage(div_button[e],"");for(let t=0;t<allButtonLength();t++)touch(div_button[t],e=>{0===bs&&button[t].filter<=0&&1===button[t].m&&1<=button[t].opacity&&(button[t].time=0,button[t].filter=1,button[t].hit=1)},e=>{},()=>{0===bs&&1===button[t].m&&1<=button[t].opacity&&1===button[t].hit&&(button[t].hit=2,button[t].filter=1)});function xy_Button(e,t){putXY(div_button[e],t[0],t[1])}function tapButton(e,t){1===button[e].hit?(t(),button[e].hit=0):(2===button[e].hit&&(button[e].hit=0),button[e].filter-=.1,button[e].filter<=0&&(button[e].filter=0))}function tapEndButton(e,t,n){1===button[e].hit?(button[e].time++,15<=button[e].time&&(n(),button[e].hit=0)):2===button[e].hit?(t(),button[e].hit=0):(button[e].filter-=.1,button[e].filter<=0&&(button[e].filter=0))}function setButton(t){for(let e=0;e<buttonMax;e++)e<t?button[e].m=1:button[e].m=0;for(let e=0;e<buttonMax;e++)0===button[e].m?Remove(div_button[e]):(div_button[e].style.filter="brightness("+(1+.3*button[e].filter)+")",putXY(div_button[e],button[e].x,button[e].y))}function allButtonReset(){for(let e=0;e<allButtonLength();e++)button[e].filter=0,button[e].hit=0,button[e].time=0,button[e].opacity=1,div_button[e].style.opacity=1}const title="ブーメランサバイバー モバイル",shareURL=getShareUrl();function getShareUrl(){let e="https://ramunespark.github.io/boomerangSurvivor_mobile/";return 0!==pN&&(e+="?code="+playerName[pN]),e}const div_bannerBack=createDiv("bannerBack");function shareContent(e,t){navigator.share&&navigator.share({title:e,url:t}).then(()=>{}).catch(console.error)}function setShareButton(t){var n=[10,26,42,58,74,90];for(let e=buttonMax;e<allButtonLength();e++){var a=e-buttonMax;button[e].m=1,button[e].opacity+=.1,1<=button[e].opacity&&(button[e].opacity=1),xy_Button(e,[n[a]+"%",t+35]),div_button[e].style.opacity=button[e].opacity,5!=a&&1!=a&&(div_button[e].style.filter="brightness("+(1+.3*button[e].filter)+")"),0==a&&"title"!==scene?setImageWidth(div_button[e],"image/button/shareButton"+a+"r.webp",50):setImageWidth(div_button[e],"image/button/shareButton"+a+".webp",50),0==a&&"title"===scene&&(putXY(div_bannerBack,"50%",t+35),div_bannerBack.style.opacity=button[e].opacity,setImageWidth(div_bannerBack,"image/button/bannerBack.webp",540))}var e=buttonMax;tapButton(e,()=>{soundCh[0]="ogg/se/confirm.ogg","title"===scene?setTimeout(()=>{shareContent(title,shareURL)},30):setTimeout(()=>{copyText(gameShare(!0))},30)}),tapButton(e+1,()=>{soundCh[0]="ogg/se/confirm.ogg",setTimeout(()=>{blueskyShare(gameShare(!0))},30)}),tapButton(e+2,()=>{soundCh[0]="ogg/se/confirm.ogg",setTimeout(()=>{twitterShare(gameShare(!0))},30)}),tapButton(e+3,()=>{soundCh[0]="ogg/se/confirm.ogg",setTimeout(()=>{misskeyShare(gameShare(!0))},30)}),tapButton(e+4,()=>{soundCh[0]="ogg/se/confirm.ogg",setTimeout(()=>{taittsuShare(gameShare(!0))},30)}),tapButton(e+5,()=>{soundCh[0]="ogg/se/confirm.ogg",setTimeout(()=>{lineShare(gameShare(!1))},30)})}function shareContent(e,t){navigator.share&&navigator.share({title:e,url:t}).then(()=>{}).catch(console.error)}function urlJump(e){"iOS"===os?window.location.href=e:window.open(e,"_blank")}function blueskyShare(e){let t=encodeURIComponent(e);setTimeout(()=>{urlJump("https://bsky.app/intent/compose?text="+t)},300)}function twitterShare(e){let t=encodeURIComponent(e);setTimeout(()=>{urlJump("https://x.com/intent/post?text="+t)},300)}function misskeyShare(e){let t=encodeURIComponent(e);setTimeout(()=>{urlJump("https://misskeyshare.link/share.html?text="+t)},300)}function taittsuShare(e){let t=encodeURIComponent(e);setTimeout(()=>{urlJump("https://taittsuu.com/share?text="+t)},300)}function lineShare(e){let t=encodeURIComponent(e);setTimeout(()=>{urlJump("https://line.me/R/share?text="+t)},300)}function gameShare(t){let n;if("title"===scene)n=t?title+"\n（スマホ用ブラウザゲーム）\n"+shareURL+"\n\n#ブーサバモバイル":title+"\n（スマホ用ブラウザゲーム）\n"+shareURL+"\n";else if("result"===scene){let e;e=surviveTime()===60*startMinute?"最後までクリアー":"残りタイム"+timeInfo(time.p).m+"分"+timeInfo(time.p).s+"秒で やられた！",n=t?title+"\n（スマホ用ブラウザゲーム）\n"+shareURL+"\n\n【モード】"+startMinute+"分モード\n【結果】"+e+"\n【スコア】"+scoreSet()+"\n#ブーサバモバイル":title+"\n（スマホ用ブラウザゲーム）\n"+shareURL+"\n\n【モード】"+startMinute+"分モード\n【結果】"+e+"\n【スコア】"+scoreSet()}return n}function copyText(e){e=new Blob([e],{type:"text/plain"}),e=[new ClipboardItem({"text/plain":e})];navigator.clipboard.write(e).then(function(){},function(){})}defaultSet(div_bannerBack,screen),translate(div_bannerBack,Center,Center),div_bannerBack.style.zIndex=1,div_bannerBack.style.mixBlendMode="screen";const div_pageNavi=createDiv("pageNavi");defaultSet(div_pageNavi,screen),putXY(div_pageNavi,"96%","2%"),translate(div_pageNavi,Right,Top),fontSet(div_pageNavi,"#000000","Higashi","25","bold","right"),textEdge(div_pageNavi,3,"#FFFFFF"),div_pageNavi.style.zIndex=1e5,setText(div_pageNavi,"");let pageNavi_Y=-20;function howToPlaySet(){touchMark={x:null,y:null},playerDefault(),weaponDefault(),fingerDefault(),enemyDefault(),itemDefault(),1===sound&&loadSound2(["ogg/se/throw.ogg","ogg/se/item.ogg","ogg/se/defeatEnemy.ogg"]),load2(["image/touchWidthMark.webp","image/touchHeightMark.webp","image/touchScreen.webp","image/walk_leftMini.png","image/walk_rightMini.png","image/"+mapleTheme+"/up0.webp","image/"+mapleTheme+"/left0.webp","image/"+mapleTheme+"/left1.webp","image/"+mapleTheme+"/left2.webp","image/"+mapleTheme+"/left3.webp","image/"+mapleTheme+"/right0.webp","image/"+mapleTheme+"/right1.webp","image/"+mapleTheme+"/right2.webp","image/"+mapleTheme+"/right3.webp","image/"+mapleTheme+"/miss0.webp","image/"+mapleTheme+"/miss1.webp","image/item/0.png","image/item/1.png","image/enemy/0_0"+usaraTheme+".webp","image/enemy/0_1"+usaraTheme+".webp","image/enemy/1_0.webp","image/enemy/1_1.webp","image/enemy/1_2.webp","image/enemy/1_3.webp","image/enemy/0_D"+usaraTheme+".webp","image/enemy/1_D.webp","image/enemy/D_0.webp","image/enemy/D_1.webp","image/enemy/D_2.webp","image/shadow.png","image/weapon.png","image/finger/f.webp","image/finger/shadow.png"]);var e=howToPage;0===e&&(fing.m=0),5===e?(div_gameScreen.appendChild(div_finger),div_gameScreen.appendChild(div_fShadow),fing.x=420,fing.y=540,fing.t=1):(div_touchScreen.appendChild(div_finger),div_touchScreen.appendChild(div_fShadow))}let howToPage=0,howTo=0,hShift=0;const howToMessage=[["ゲーム説明","主人公のメイプルを操作し、ブーメランで敵を倒すアクションゲームです。<br>設定したタイム（2分または5分）をプレイして、時間いっぱいハイスコアを目指しましょう。"],["移動","タッチエリアをタップすると、その場所に並ぶようにメイプルが自動的に左右に歩きます。"],["ブーメランを投げる","タッチエリアで上方向にフリックすると、ブーメランを投げて敵を攻撃することができます。<br>1回のブーメランで2体以上の敵を倒すと、より高得点となります。"],["アイテム","直接触れるか、ブーメランを当てることで獲得することができます。<br>移動速度が上がる「スピードアップ」をはじめ、様々なアイテムが登場します。"],["ミス","敵に直接触れてしまうとミスとなります。<br>ミスになった場合は残り時間に関わらずゲーム終了となってしまうので、注意しましょう。"],["止まったまま投げる","ゲーム画面の下半分をタップすると、フリックをせずにブーメラン攻撃ができます。<br>タッチエリアに触れないため、移動せずにブーメランを投げたい場合に向いています。"]];function howToPlay(n){let e="すすむ",t="もどる";howToPage>=howToMessage.length-1?e="おわる":0===howToPage&&(t="やめる"),Swal.fire({title:'<p style="margin-top: 580px; margin-bottom: 0px;">'+howToMessage[howToPage][0]+"</p>",target:screen,html:'<p style="text-align: left; font-size:1.2em;margin-top: 0px; ">'+howToMessage[howToPage][1]+"</p>",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:e,cancelButtonText:t,confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",background:swalWhite,color:swalBlack,reverseButtons:!0,didOpen:()=>{howToPlaySet(),hShift=0;var e=Swal.getPopup(),t=document.getElementById("swal2-html-container"),t=(e.classList.remove("animate__fadeInDown"),"R"===n?e.classList.add("animate__fadeInRight"):e.classList.add("animate__fadeInLeft"),setImage(div_gameScreen,"image/gameScreen.webp"),t.appendChild(div_gameScreen),div_gameScreen.style.transformOrigin="top center",putXY(div_gameScreen,"50%",20),transform(div_gameScreen,Center,Top,0,55),setImage(div_touchScreen,"image/touchScreenBase.webp"),t.appendChild(div_touchScreen),div_touchScreen.style.transformOrigin="top center",transform(div_touchScreen,Center,Top,0,55),putXY(div_touchScreen,"50%",360),setImageWidth(div_gameBG,"image/gameBGmini_"+bgTheme+".webp",540),e.style.borderRadius="50px",document.querySelector(".swal2-confirm")),e=(t.style.fontWeight="bold",t.style.fontSize="1.1em",t.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite,howTo=1},showClass:{popup:`
      animate__animated
      animate__fadeInDown
      animate__faster
    `},hideClass:{popup:`
            animate__animated
            animate__fadeOutDown
            animate__faster
          `}}).then(e=>{e.isConfirmed?(soundCh[0]="ogg/se/confirm.ogg",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"),fingerDelete(),howTo=0,++howToPage>=howToMessage.length?nextScene="title":howToPlay("R")):(soundCh[0]="ogg/se/confirm.ogg",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutRight"),fingerDelete(),howTo=0,--howToPage<0?nextScene="title":howToPlay("L"))})}function howToLoop(){howToSP(),finger(),useTouchDisplay(),playerDisplay(),weaponDisplay(),itemDisplay(),enemyDisplay(),2<=(pageNavi_Y+=.2)&&(pageNavi_Y=2),putXY(div_pageNavi,"96%",pageNavi_Y+"%"),setText(div_pageNavi,howToPage+1+"/"+howToMessage.length)}function howToSP(){var e=howToPage;1===e?0===hShift||5===hShift?(fing.x-=3,fing.x<=150&&(fing.x=150,fing.h-=5,fing.h<=0)&&(fing.h=0,player.x===touchMark.x)&&hShift++):1===hShift||3===hShift||8===hShift?(fing.h+=5,70<=fing.h&&(hShift++,fing.h=70,8<hShift)&&(hShift=0)):2===hShift||6===hShift?(fing.x+=3,390<=fing.x&&(fing.x=390,fing.h-=5,fing.h<=0)&&(fing.h=0,player.x===touchMark.x)&&hShift++):4===hShift?(fing.h-=5,fing.h<=0&&(fing.h=0,hShift=5)):7===hShift&&(fing.x-=3,fing.x<=270)&&(fing.x=270,player.x<=270)&&(hShift=8):2===e?0===hShift?0===enemy[0].m&&(enemy[0].type=0,enemy[0].m=2,enemy[0].vec=0,enemy[0].dVec="none",enemy[0].mVec=orVec(enemy[0].vec),enemy[0].x=600,enemy[0].y=370,enemy[0].v=1.7,hShift=1):1===hShift?(fing.h-=5,fing.h<=0&&(fing.h=0,fing.x-=4,fing.x<=210)&&(fing.x=210,player.x<=210)&&(player.x=210,hShift++)):2===hShift||7===hShift?(fing.h+=5,70<=fing.h&&(fing.h=70,hShift++),8===hShift&&(hShift=0)):3===hShift?Math.abs(enemy[0].x-270)<=25&&hShift++:4===hShift?(fing.h-=5,fing.h<=0&&hShift++):5===hShift?(fing.y-=15,fing.x+=2,fing.y<=130&&(fing.y=130,hShift++),330<=fing.x&&(fing.x=330)):6===hShift&&(fing.y+=3,320<=fing.y&&(fing.y=320),fing.x+=2,330<=fing.x)&&(fing.x=330)<=player.x&&(player.x=330,0===enemy[0].m)&&320<=fing.y&&hShift++:3===e?0===hShift?0===item[0].m&&(item[0].v=3*.7,item[0].fx=180,item[0].x=item[0].fx,item[0].y=-30,item[0].m=1,item[0].time=0,item[0].r=Math.PI/2,hShift=1):1===hShift?(fing.x-=3,fing.x<=180&&(fing.x=180,fing.h-=5,fing.h<=0)&&(fing.h=0,1===item[0].m&&Math.abs(item[0].x-player.x)<=10&&300<=item[0].y&&player.speedLevel%2==0?hShift++:0===item[0].m&&(hShift=3))):2===hShift?(fing.y-=15,fing.y<=130&&(fing.y=130,hShift++)):3===hShift?(fing.y+=7,fing.x+=13,320<=fing.y&&(fing.y=320),390<=fing.x&&(fing.x=390)<=player.x&&hShift++):4===hShift&&(fing.y+=7,fing.x-=13,320<=fing.y&&(fing.y=320),fing.x<=270&&(fing.x=270),player.x<=270)&&(hShift=0):4===e?0===hShift?0===enemy[0].m&&(enemy[0].type=1,enemy[0].m=2,enemy[0].vec="down",enemy[0].dVec="none",enemy[0].mVec="down",enemy[0].x=450,enemy[0].y=170,enemy[0].v=2,hShift=1):1<=hShift&&(250<=enemy[0].y&&(fing.x+=5),450<=fing.x&&(fing.x=450,playerPlayState()&&(fing.h-=5),fing.h<=0)&&(fing.h=0),!1===playerPlayState()&&(fing.h+=5,70<=fing.h)&&(fing.h=70),"miss3"===player.state)&&20<=++hShift&&(hShift=0,howToPlaySet()):5===e&&(0===hShift?0===enemy[0].m&&(enemy[0].type=0,enemy[0].m=2,enemy[0].vec=1,enemy[0].dVec="none",enemy[0].mVec=orVec(enemy[0].vec),enemy[0].x=-60,enemy[0].y=380,enemy[0].v=1.7,hShift=1):1===hShift?(0===enemy[1].m&&2===enemy[0].m&&-20<=enemy[0].x&&(enemy[1].type=0,enemy[1].m=2,enemy[1].vec=1,enemy[1].dVec="none",enemy[1].mVec=orVec(enemy[1].vec),enemy[1].x=-60,enemy[1].y=340,enemy[1].v=1.7),Math.abs(enemy[0].x-player.x)<=45&&(fing.h-=5,fing.h<=0)&&(fing.h=0,hShift++)):2===hShift&&(fing.h+=5,70<=fing.h)&&(fing.h=70,hShift=0))}const div_gameScreen=createDiv("gameScreen"),div_gameBG=(defaultSet(div_gameScreen,screen),putXY(div_gameScreen,"50%","0%"),translate(div_gameScreen,Center,Top),div_gameScreen.style.zIndex=1e3,div_gameScreen.style.overflow="hidden",setImage(div_gameScreen,""),createDiv("gameBG"));defaultSet(div_gameBG,div_gameScreen),putXY(div_gameBG,"50%","0%"),translate(div_gameBG,Center,Top),div_gameBG.style.zIndex=0,div_gameBG.style.overflow="hidden",setImage(div_gameBG,"");let finish=0,finishX=636;const div_gameFinish=createDiv("gameFinish"),gameZbase=(defaultSet(div_gameFinish,div_gameScreen),putXY(div_gameFinish,"50%","0%"),translate(div_gameFinish,Center,Center),div_gameFinish.style.zIndex=7e4,div_gameFinish.style.overflow="hidden",setImage(div_gameFinish,""),100);let bonus=[0,0],chainHit=0;function sGame(){var e;-100===bs&&(onlineSet=0,onlineLastRank[2]=[null,null],onlineLastRank[5]=[null,null],onlineNowRank=null,load(["image/gameBGmini_"+bgTheme+".webp","image/touchWidthMark.webp","image/touchHeightMark.webp","image/touchScreen.webp","image/walk_leftMini.png","image/walk_rightMini.png","image/"+mapleTheme+"/up0.webp","image/"+mapleTheme+"/left0.webp","image/"+mapleTheme+"/left1.webp","image/"+mapleTheme+"/left2.webp","image/"+mapleTheme+"/left3.webp","image/"+mapleTheme+"/right0.webp","image/"+mapleTheme+"/right1.webp","image/"+mapleTheme+"/right2.webp","image/"+mapleTheme+"/right3.webp","image/"+mapleTheme+"/miss0.webp","image/"+mapleTheme+"/miss1.webp","image/status.webp","image/time.webp","image/item/0.png","image/item/1.png","image/item/2.png","image/item/2s.png","image/item/3.png","image/item/3s.png","image/"+itemTheme+"/4.png","image/"+itemTheme+"/5.png","image/item/f.png","image/item/0s.png","image/item/1s.png","image/enemy/0_0"+usaraTheme+".webp","image/enemy/0_1"+usaraTheme+".webp","image/enemy/1_0.webp","image/enemy/1_1.webp","image/enemy/1_2.webp","image/enemy/1_3.webp","image/enemy/2_0.webp","image/enemy/2_1.webp","image/enemy/2_2.webp","image/enemy/2_3.webp","image/enemy/3_0.webp","image/enemy/3_1.webp","image/enemy/3_2.webp","image/enemy/4_0.webp","image/enemy/4_1.webp","image/enemy/0_D"+usaraTheme+".webp","image/enemy/1_D.webp","image/enemy/2_D.webp","image/enemy/3_D.webp","image/enemy/D_0.webp","image/enemy/D_1.webp","image/enemy/D_2.webp","image/shadow.png","image/weapon.png","image/enemy/4allow.webp"]),e=["ogg/se/throw.ogg","ogg/se/item.ogg","ogg/se/defeatEnemy.ogg","ogg/se/miss.ogg","ogg/se/twinkle.ogg","ogg/se/pause.ogg"],3!==soundSelect&&e.push("ogg/bgm/main"+soundSelect+".ogg"),loadSound(e),screen.appendChild(div_gameScreen),putXY(div_gameScreen,"50%","0%"),div_gameScreen.style.transformOrigin="center",translate(div_gameScreen,Center,Top),setImage(div_gameScreen,"image/gameScreen.webp"),div_gameScreen.style.zIndex=0,setImage(div_gameStatus,"image/status.webp"),allButtonReset(),pause=0,touchScreenEnd(),bonus=[0,0],chainHit=0,finish=0,setImageWidth(div_gameBG,"image/gameBGmini_"+bgTheme+".webp",540)),playerPlayState()&&0<time.p?(setButton(1),xy_Button(0,[40,40/60*40]),tapButton(0,()=>{0===pause?(pause=1,soundCh[6]="ogg/se/pause.ogg"):2===pause&&(pause=3,soundCh[6]="ogg/se/pause.ogg")}),setImageWidth(div_button[0],"image/button/pauseButton.png",80)):(allButtonReset(),setButton(0),10!=pause&&(pause=0)),timeDisplay(),scoreDisplay(),itemStatusDisplay(),useTouchDisplay(),1==time.p&&10==time.k&&playerPlayState()&&loadSound2(["ogg/se/finish.ogg"]),12==time.p&&45==time.k&&playerPlayState()&&loadSound2(["ogg/se/select.ogg"]),0<time.p&&time.p<=9&&0==time.k&&playerPlayState()&&(soundCh[5]="ogg/se/select.ogg"),time.p<=0&&0===pause&&0===finish&&(pause=10,finish=1,finishX=636,soundCh[8]="ogg/se/finish.ogg"),1===finish&&((finishX-=15)<=270&&(finishX=270,finish=2),putXY(div_gameFinish,finishX,"50%"),setImageWidth(div_gameFinish,"image/finish.webp",192)),2===finish&&(shift+=.5),0===pause&&(playerDisplay(),weaponDisplay(),itemDisplay(),enemyDisplay()),30<=shift&&0===bs&&(nextScene="result",dateInfo=getDateData(),dateValue=getDateValue()),null===channels[8]&&playerPlayState()&&0<time.p&&-100!==bs&&(soundCh[8]="ogg/bgm/main"+soundSelect+".ogg")}let pause=0;function touchGameScreenLocation(e){var t={},n=div_gameScreen.getBoundingClientRect(),a=div_gameScreen.offsetWidth/n.width,i=div_gameScreen.offsetHeight/n.height,a=(e.changedTouches[0].clientX-n.left)*a,e=(e.changedTouches[0].clientY-n.top)*i;return t.x=a,t.y=e,t}touch(div_gameScreen,e=>{0===pause&&"game"===scene&&300<=touchGameScreenLocation(e).y&&(0!==weapon.m&&3!==weapon.m||(weapon.m=1,weapon.stop=5))},e=>{},e=>{});const div_logo=createDiv("logo"),div_copyRight=(defaultSet(div_logo,screen),putXY(div_logo,"50%","20%"),translate(div_logo,Center,Center),div_logo.style.zIndex=10,setImage(div_logo,""),createDiv("copyRight")),div_copyRight2=(defaultSet(div_copyRight,screen),putXY(div_copyRight,"98%","79%"),translate(div_copyRight,Right,Bottom),fontSet(div_copyRight,"#A5F6EC","Higashi","25","bold","right"),textEdge(div_copyRight,3,"#10897A"),div_copyRight.style.zIndex=100,setText(div_copyRight,""),createDiv("copyRight2")),div_copyRight3=(defaultSet(div_copyRight2,screen),putXY(div_copyRight2,"98%","82%"),translate(div_copyRight2,Right,Bottom),fontSet(div_copyRight2,"#A5F6EC","Higashi","20","bold","right"),textEdge(div_copyRight2,3,"#10897A"),div_copyRight2.style.zIndex=100,setText(div_copyRight2,""),createDiv("copyRight2")),div_copyRight4=(defaultSet(div_copyRight3,screen),putXY(div_copyRight3,"2%","82%"),translate(div_copyRight3,Left,Bottom),fontSet(div_copyRight3,"#A5F6EC","Higashi","20","bold","right"),textEdge(div_copyRight3,3,"#10897A"),div_copyRight3.style.zIndex=100,setText(div_copyRight3,""),createDiv("copyRight2"));defaultSet(div_copyRight4,screen),putXY(div_copyRight4,"50%","82%"),translate(div_copyRight4,Center,Bottom),fontSet(div_copyRight4,"#A5F6EC","Higashi","20","bold","right"),textEdge(div_copyRight4,3,"#10897A"),div_copyRight4.style.zIndex=100,setText(div_copyRight4,"");let easy=0,soundSprite,soundSelect=load_saveData("boomerangSurvivorMobile_946323748346"),cheatA=(soundSelect=null===soundSelect?0:JSON.parse(soundSelect),[0,[0,0,0,0],0]);function sTitle(){-100===bs&&(soundSprite={p:0,k:0},onlineNowRank=null,cheatA=[0,[0,0,0,0],0],load(["image/titleMini_"+titleTheme+".webp","image/logo.webp","image/button/startButton.webp","image/button/howButton.webp","image/button/hiButton.webp","image/button/rankingButton.webp","image/button/2mButton.webp","image/button/5mButton.webp","image/button/0sound0.png","image/button/1sound0.png","image/button/1sound1.png","image/button/1sound2.png","image/button/bgm0.png","image/button/bgm1.png","image/button/bgm2.png","image/button/bgm3.png","image/button/shareButton0.webp","image/button/shareButton1.webp","image/button/shareButton2.webp","image/button/shareButton3.webp","image/button/shareButton4.webp","image/button/shareButton5.webp","image/button/level0.webp","image/button/level1.webp","image/button/bannerBack.webp"]),loadSound(null),allButtonReset()),setShareButton(1012*.87),0===customMode?(setButton(7),xy_Button(0,["50%","49%"]),xy_Button(1,["50%","59%"]),xy_Button(2,["50%","69%"]),xy_Button(3,["50%","39%"])):(setButton(8),xy_Button(0,["50%","45%"]),xy_Button(1,["50%","53%"]),xy_Button(2,["50%","61%"]),xy_Button(3,["50%","36%"]),xy_Button(7,["50%","69%"])),xy_Button(4,[50,50]),xy_Button(5,[220,50]),xy_Button(6,[490,50]),tapButton(0,()=>{0===easy?nextScene="game":checkPractice(),soundCh[0]="ogg/se/confirm.ogg"}),tapButton(1,()=>{soundCh[0]="ogg/se/confirm.ogg",pageNavi_Y=-3,howToPage=0,howToPlay("R")}),tapButton(2,()=>{soundCh[0]="ogg/se/confirm.ogg",nextScene="ranking",socketEmit("requestRanking",[playerID,onlineLastRank])}),tapButton(7,()=>{soundCh[0]="ogg/se/confirm.ogg",nextScene="custom"}),tapButton(3,()=>{soundCh[1]="ogg/se/select.ogg",startMinute=2===startMinute?5:2}),tapButton(4,()=>{sound=0===sound?1:0,setTimeout(()=>{loadSound2(["ogg/se/confirm.ogg","ogg/se/select.ogg"])},120)}),tapButton(5,()=>{soundCh[1]="ogg/se/select.ogg",easy=0===easy?1:0}),tapEndButton(6,()=>{cheatA=cheatCount(cheatA,1,[4,6,2,2]),soundCh[1]="ogg/se/select.ogg",soundSelect++,save_saveData("boomerangSurvivorMobile_946323748346",soundSelect%=4)},()=>{cheatA=cheatCount(cheatA,-1,[4,6,2,2]),soundCh[1]="ogg/se/select.ogg",save_saveData("boomerangSurvivorMobile_946323748346",soundSelect=--soundSelect<0?3:soundSelect)}),button[6].opacity=sound,div_button[6].style.opacity=button[6].opacity,0===sound?frameReset(soundSprite):animeFrame(soundSprite,15,3),0===customMode?(setImage(div_button[0],"image/button/startButton.webp"),setImage(div_button[1],"image/button/howButton.webp"),socket?setImage(div_button[2],"image/button/rankingButton.webp"):setImage(div_button[2],"image/button/hiButton.webp")):(setImageWidth(div_button[0],"image/button/startButton.webp",330),setImageWidth(div_button[1],"image/button/howButton.webp",330),setImageWidth(div_button[2],"image/button/hiButton.webp",330),setImageWidth(div_button[7],"image/button/onlineButton.webp",330)),setImage(div_button[3],"image/button/"+startMinute+"mButton.webp"),setImageWidth(div_button[4],"image/button/"+sound+"sound"+soundSprite.p+".png",70),setImageWidth(div_button[5],"image/button/level"+easy+".webp",166.4),setImageWidth(div_button[6],"image/button/bgm"+soundSelect+".png",70),setText(div_copyRight,copyRight()),setText(div_copyRight2,underline("ABOUT THIS")),setText(div_copyRight3,underline("TOP")),0!==pN&&setText(div_copyRight4,underline("テーマを解除")),setImageWidth(div_bg,"image/titleMini_"+titleTheme+".webp",540),setImageWidth(div_logo,"image/logo.webp",540),1===howTo&&howToLoop()}function copyRight(){return"©2024 RAMUNE SPARK"}function underline(e){return'<span style="text-decoration:underline;text-decoration-color:#A5F6EC;">'+e+"</span>"}function cheatCount(e,t,n){return 0===e[0]&&1===t&&0===soundSelect&&(e[0]=1),0===e[2]&&1<=e[0]&&(1===t&&e[0]%2==1||-1===t&&e[0]%2==0?(e[1][e[0]-1]++,e[1][e[0]-1]>=n[e[0]-1]&&(e[0]++,5<=e[0])&&(e[2]=1,soundCh[3]="ogg/se/finish.ogg")):e=[0,[0,0,0,0],0]),e}function checkPractice(){Swal.fire({title:"プラクティス",target:screen,html:'<p style="text-align: left; font-size:1.2em ">スタンダードよりも敵の攻撃がやさしくなります。<br>はじめての方にもおすすめです。</p>',allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"スタート",cancelButtonText:"やめる",confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",background:swalWhite,color:swalBlack,reverseButtons:!0,didOpen:()=>{Swal.getPopup().style.borderRadius="50px";var e=document.querySelector(".swal2-confirm"),e=(e.style.fontWeight="bold",e.style.fontSize="1.4em",e.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite},showClass:{popup:`
                animate__animated
                animate__fadeInRight
                animate__faster
              `},hideClass:{popup:`
                animate__animated
                animate__fadeOutDown
                animate__faster
              `}}).then(e=>{e.isConfirmed?(soundCh[0]="ogg/se/confirm.ogg",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutUp"),nextScene="game"):(Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"))})}touch(div_copyRight2,e=>{URLjump=1,window.location.href="https://github.com/RamuneSpark/boomerangSurvivor_mobile/blob/main/README.md"},e=>{},()=>{}),touch(div_copyRight3,e=>{URLjump=1,window.location.href="https://ramunespark.github.io/"},e=>{},()=>{}),touch(div_copyRight4,e=>{URLjump=1,window.location.href="https://ramunespark.github.io/boomerangSurvivor_mobile/"},e=>{},()=>{});const div_rMessage=createDiv("rMessage"),div_shareMessage=(defaultSet(div_rMessage,screen),putXY(div_rMessage,"50%",170),translate(div_rMessage,Center,Center),fontSet(div_rMessage,"green","Higashi","22","bold","center"),textEdge(div_rMessage,3,"green"),div_rMessage.style.zIndex=1e3,setText(div_rMessage,""),createDiv("shareMessage")),div_retryMessage=(defaultSet(div_shareMessage,screen),putXY(div_shareMessage,"50%",640),translate(div_shareMessage,Center,Center),fontSet(div_shareMessage,"#FFFFFF","Higashi","25","bold","right"),textEdge(div_shareMessage,3,"#5674A1"),div_shareMessage.style.zIndex=1e3,setText(div_shareMessage,""),createDiv("retryMessage")),div_rST=(defaultSet(div_retryMessage,screen),putXY(div_retryMessage,"50%",400),translate(div_retryMessage,Center,Center),fontSet(div_retryMessage,"#FFFFFF","Higashi","30","bold","right"),textEdge(div_retryMessage,3,"#5674A1"),div_retryMessage.style.zIndex=1e3,setText(div_retryMessage,""),createDiv("rST")),div_rS=(defaultSet(div_rST,screen),putXY(div_rST,60,290),translate(div_rST,Left,Bottom),fontSet(div_rST,"#FFFFFF","Higashi","40","bold","right"),textEdge(div_rST,3,"#5674A1"),div_rST.style.zIndex=1e3,setText(div_rST,""),createDiv("rS"));defaultSet(div_rS,screen),putXY(div_rS,480,290),translate(div_rS,Right,Bottom),fontSet(div_rS,"#FFFFFF","Higashi","50","bold","right"),textEdge(div_rS,4,"#5674A1"),div_rS.style.zIndex=1e3,setText(div_rS,"");let rPT_X=0;const div_rPST=createDiv("rPST"),div_rPSR=(defaultSet(div_rPST,screen),putXY(div_rPST,60,330),translate(div_rPST,Left,Bottom),fontSet(div_rPST,"sys","Higashi","25","bold","right"),textEdge(div_rPST,3,"sys"),div_rPST.style.zIndex=1e3,setText(div_rPST,""),createDiv("rPSR")),div_rPS=(defaultSet(div_rPSR,screen),putXY(div_rPSR,60,330),translate(div_rPSR,Center,Bottom),fontSet(div_rPSR,"sys","Higashi","25","bold","right"),textEdge(div_rPSR,3,"sys"),div_rPSR.style.zIndex=1e3,setText(div_rPSR,""),createDiv("rPS"));defaultSet(div_rPS,screen),putXY(div_rPS,480,330),translate(div_rPS,Right,Bottom),fontSet(div_rPS,"sys","Higashi","25","bold","right"),textEdge(div_rPS,3,"sys"),div_rPS.style.zIndex=1e3,setText(div_rPS,"");let rShift=0,rPage=0,yourRank,resultAccident=load_saveData("boomerangSurvivorMobile_462846472827"),resultAccidentLoad=0,onlineSet=0,onlineLastRank=[],onlineNowRank=null;function saveResultAccident(){save_saveData("boomerangSurvivorMobile_462846472827",[time.p,time.k,startMinute,score,yourRank,nameChange,dateInfo,sound,0,displayDate(1),cheatA[2],dateValue,pN,onlineSet,onlineNowRank,onlineLastRank])}function delResultAccident(){delete_saveData("boomerangSurvivorMobile_462846472827"),resultAccident=null}onlineLastRank[2]=[null,null],onlineLastRank[5]=[null,null],socketOn("rank",e=>{"result"===scene&&0===bs&&100===shift&&(onlineLastRank=e[0],onlineNowRank=e[1],saveResultAccident(),rPT_X=540,save_saveData("boomerangSurvivorMobile_738432173843",onlineLastRank),soundCh[4]="ogg/se/scoreOK.ogg")});const lvName=["スタンダード","プラクティス"];function sResult(){let t;if(t=null===socket?3:4,-100===bs){soundSprite={p:0,k:0},load(["image/menu.webp","image/button/shareButton0r.webp","image/button/shareButton1.webp","image/button/shareButton2.webp","image/button/shareButton3.webp","image/button/shareButton4.webp","image/button/shareButton5.webp","image/button/yesButton.webp","image/button/noButton.webp","image/button/cardButton.webp","image/button/onlineRankingButton.webp","image/lv"+easy+".webp"]);var e=["ogg/se/confirm.ogg","ogg/se/select.ogg","ogg/se/item.ogg","ogg/se/scoreOK.ogg"];3!==soundSelect&&e.push("ogg/bgm/result.ogg"),loadSound(e),allButtonReset(),setText(div_rST,"スコア"),rPT_X=540;for(let e=rPage=0;e<t;e++)button[e].opacity=0;for(let e=buttonMax;e<allButtonLength();e++)button[e].opacity=0;null===resultAccident?(nameChange=0,yourRank=null):shift=100}if(1===onlineSet&&(button[3].opacity=.31),0==shift)(rPT_X-=40)<=0&&(rPT_X=0,shift=1,rShift=0,soundCh[3]="ogg/se/select.ogg");else if(1==shift)++rShift>=fps&&(shift=2,soundCh[3]="ogg/se/item.ogg",score+=bonusScoreGET().score[rPage]);else if(2==shift)(rPT_X-=40)<=-540&&(++rPage>=bonusScoreGET().name.length?(rPT_X=540,shift=100,soundCh[4]="ogg/se/scoreOK.ogg",1!==cheatA[2]&&rankingCheck(),saveResultAccident()):(rPT_X=540,shift=0));else if(100==shift){(rPT_X-=40)<=0&&(rPT_X=0),div_retryMessage.style.opacity=button[0].opacity,setText(div_retryMessage,"同じ設定で再挑戦しますか？"),1!==cheatA[2]&&(div_shareMessage.style.opacity=button[buttonMax].opacity,setText(div_shareMessage,"記録をシェア"),setShareButton(700)),setButton(t),xy_Button(0,[2/3*100+"%",500]),xy_Button(1,[1/3*100+"%",500]),null===socket?xy_Button(2,["50%",890]):(xy_Button(2,["50%",820]),xy_Button(3,["50%",910])),tapButton(0,()=>{nextScene="game",soundCh[0]="ogg/se/confirm.ogg",soundCh[8]="stop",delResultAccident()}),tapButton(1,()=>{nextScene="title",soundCh[0]="ogg/se/confirm.ogg",soundCh[8]="stop",delResultAccident()}),tapButton(2,()=>{clearCard(),soundCh[0]="ogg/se/confirm.ogg"}),tapButton(3,()=>{onlineGo(),soundCh[0]="ogg/se/confirm.ogg"});for(let e=0;e<t;e++)2!=e&&3!=e||1!==cheatA[2]?2!=e&&3!=e||.31!==button[e].opacity?button[e].opacity+=.1:button[e].opacity=.31:button[e].opacity=0,1<=button[e].opacity&&(button[e].opacity=1),div_button[e].style.opacity=button[e].opacity;setImage(div_button[0],"image/button/yesButton.webp"),setImage(div_button[1],"image/button/noButton.webp"),setImage(div_button[2],"image/button/cardButton.webp"),socket&&setImage(div_button[3],"image/button/onlineRankingButton.webp")}surviveTime()===60*startMinute?setText(div_rMessage,startMinute+" MINUTES / 最後までクリアー<br>"+lvName[easy]):setText(div_rMessage,startMinute+" MINUTES / 残りタイム　"+timeTextDisplay(time.p)+"<br>"+lvName[easy]),2===shift?(putXY(div_rPST,rPT_X+60,330),putXY(div_rPS,480,330+40*rPT_X/540)):0===shift||1===shift?(putXY(div_rPST,rPT_X+60,330),putXY(div_rPS,rPT_X+540-60,330)):100===shift&&putXY(div_rPSR,rPT_X+270,330),div_rPST.style.opacity=1-Math.abs(rPT_X)/540,div_rPS.style.opacity=1-Math.abs(rPT_X)/540,100!==shift?(setText(div_rPST,bonusScoreGET().name[rPage]),setText(div_rPS,bonusScoreGET().score[rPage]),Remove(div_rPSR)):100===shift&&null!==onlineNowRank?(setText(div_rPSR,"オンライン　"+(onlineNowRank+1)+"位　ランクイン！"),Remove(div_rPST),Remove(div_rPS)):100===shift&&null!==yourRank?(setText(div_rPSR,yourRank+"位　ランクイン！"),Remove(div_rPST),Remove(div_rPS)):(Remove(div_rPST),Remove(div_rPS),Remove(div_rPSR)),setText(div_rS,scoreSet()),setImageWidth(div_bg,"image/menu.webp",540),null===channels[8]&&-100!==bs&&bs<=0&&3!==soundSelect&&(soundCh[8]="ogg/bgm/result.ogg")}function bonusScoreGET(){var e={name:[],score:[]},t=[1,2];if(surviveTime()<60?(e.name.push("ナイストライ"),e.score.push(500/t[easy])):surviveTime()===60*startMinute?(e.name.push("フルタイムボーナス"),e.score.push(150*surviveTime()/t[easy])):(e.name.push("タイムボーナス"),e.score.push(100*surviveTime()/t[easy])),0<defeatEnemy&&(e.name.push("エネミーボーナス"),e.score.push(100*defeatEnemy/t[easy])),0===damage&&0===easy&&(e.name.push("ノーダメージ"),e.score.push(2e4)),(1===bonus[0]||1===bonus[1])&&0===easy){e.name.push("シークレットアイテム");for(let e=0;e<2;e++).5==bonus[e]&&(bonus[e]=0);surviveTime()===60*startMinute?e.score.push(12e3*(bonus[0]+bonus[1])):e.score.push(3e3*(bonus[0]+bonus[1]))}return e}function surviveTime(){return 60*startMinute-time.p}let div_rankingBase=[];for(let e=0;e<5;e++)div_rankingBase[e]=createDiv("rankingBase"+e),defaultSet(div_rankingBase[e],screen),putXY(div_rankingBase[e],"50%",110*e+220),transform(div_rankingBase[e],Center,Center,0,240),div_rankingBase[e].style.zIndex=30,setImage(div_rankingBase[e],"");let div_rankingPick=[];for(let e=0;e<5;e++)div_rankingPick[e]=createDiv("rankingPick"+e),defaultSet(div_rankingPick[e],screen),putXY(div_rankingPick[e],"50%",110*e+220),transform(div_rankingPick[e],Center,Center,0,240),div_rankingPick[e].style.zIndex=20,div_rankingPick[e].style.mixBlendMode="multiply",setImage(div_rankingPick[e],"");let div_rankingClass=[];for(let e=0;e<5;e++)div_rankingClass[e]=createDiv("rankingClass"+e),defaultSet(div_rankingClass[e],div_rankingBase[e]),putXY(div_rankingClass[e],"10%","50%"),translate(div_rankingClass[e],Center,Center),fontSet(div_rankingClass[e],"#B4FFF1","Higashi","15","bold","right"),div_rankingClass[e].style.zIndex=0,setText(div_rankingClass[e],"");let div_rankingChara=[];for(let e=0;e<5;e++)div_rankingChara[e]=createDiv("rankingChara"+e),defaultSet(div_rankingChara[e],div_rankingBase[e]),putXY(div_rankingChara[e],40,"50%"),transform(div_rankingChara[e],Left,Center,0,40),div_rankingChara[e].style.zIndex=0,div_rankingChara[e].style.transformOrigin="center left",setImage(div_rankingChara[e],"");let div_rankingScore=[];for(let e=0;e<5;e++)div_rankingScore[e]=createDiv("rankingScore"+e),defaultSet(div_rankingScore[e],div_rankingBase[e]),putXY(div_rankingScore[e],"99%","5%"),translate(div_rankingScore[e],Right,Top),fontSet(div_rankingScore[e],"#FFFFFF","Higashi","10","bold","right"),div_rankingScore[e].style.zIndex=35,setText(div_rankingScore[e],"");let div_rankingScoreBase=[];for(let e=0;e<5;e++)div_rankingScoreBase[e]=createDiv("rankingScoreBase"+e),defaultSet(div_rankingScoreBase[e],div_rankingBase[e]),putXY(div_rankingScoreBase[e],"99%","95%"),translate(div_rankingScoreBase[e],Right,Bottom),fontSet(div_rankingScoreBase[e],"#FFFFFF","Higashi","8","bold","right"),div_rankingScoreBase[e].style.zIndex=35,setText(div_rankingScoreBase[e],"");const div_rankingNavi=createDiv("rankingNavi"),div_rankingNaviSeason=(defaultSet(div_rankingNavi,screen),putXY(div_rankingNavi,"32%","80%"),translate(div_rankingNavi,Center,Center),fontSet(div_rankingNavi,"sys","Higashi","30","bold","right"),textEdge(div_rankingNavi,3,"sys"),div_rankingNavi.style.zIndex=1e3,setText(div_rankingNavi,""),createDiv("rankingNaviSeason")),div_rankingNavi2=(defaultSet(div_rankingNaviSeason,screen),putXY(div_rankingNaviSeason,"68%","80%"),translate(div_rankingNaviSeason,Center,Center),fontSet(div_rankingNaviSeason,"sys","Higashi","30","bold","right"),textEdge(div_rankingNaviSeason,3,"sys"),div_rankingNaviSeason.style.zIndex=1e3,setText(div_rankingNavi,""),createDiv("rankingNavi2")),div_rankingAlert=(defaultSet(div_rankingNavi2,screen),putXY(div_rankingNavi2,"50%","15%"),translate(div_rankingNavi2,Center,Center),fontSet(div_rankingNavi2,"#FFFFFF","Higashi","20","bold","right"),textEdge(div_rankingNavi2,2,"#555555"),div_rankingNavi2.style.zIndex=1e3,setText(div_rankingNavi2,""),createDiv("rankingAlert")),netTypeTxt=(defaultSet(div_rankingAlert,screen),putXY(div_rankingAlert,"50%",440),translate(div_rankingAlert,Center,Center),fontSet(div_rankingAlert,"sys","Higashi","30","bold","right"),textEdge(div_rankingAlert,3,"sys"),div_rankingAlert.style.zIndex=1e3,setText(div_rankingAlert,""),["ローカル","トップ","ライバル","ラスト"]),netTypeCode=[NaN,"top","yourBest","your"],netTypeNavi=["このデバイスの　ハイスコアです！","オンラインの　トップ5です！","オンラインの　あなたの順位です！","さっきのプレイは　オンラインで　何位？"];let netType=0,netSeasonType=0;const seasonCode=["all","month"];let rankNumber=["1","2","3","4","5"],onlineRanking=[],seasonYear=(onlineRanking[2]={all:null,month:null},onlineRanking[5]={all:null,month:null},"2025"),seasonMonth="1";function scoreRankingDisplay(e){let t=10485750<e?10485750:e<10?"0"+e:e;return t}function sRanking(){if(-100===bs){var t=["image/menuRanking2.webp","image/rankingBase.png","image/rankingPick.webp","image/button/2mButton.webp","image/button/5mButton.webp","image/button/backButton.webp","image/button/clearButton.png","image/button/select0.png","image/button/select1.png","image/button/all.png","image/button/month.png"];for(let e=0;e<mapleSkinName.length;e++)t.push("image/"+mapleSkinName[e]+"/down0.webp");load(t),loadSound(["ogg/se/confirm.ogg","ogg/se/select.ogg"]),allButtonReset()}for(let e=0;e<5;e++)rankNumber[e]=e;var a,i=onlineRanking[startMinute][seasonCode[netSeasonType]];let o=null;null!==i&&0!==netType&&(o=onlineRanking[startMinute][seasonCode[netSeasonType]][netTypeCode[netType]]);for(let n=0;n<5;n++){let e,t;t=0===netType?"--"===ranking[startMinute][n].date?(e="#FFC4EE","#CCCCCC"):(e="#FFFF00","#FFFFFF"):null!==o&&n<o.length&&o[n].id===playerID?(e="#FFFF00","#FFFFFF"):(e="#FFC4EE","#CCCCCC"),fontSet(div_rankingScore[n],e,"Higashi","14","bold","right"),fontSet(div_rankingScoreBase[n],t,"Higashi","8","bold","right"),0===netType?(setImage(div_rankingBase[n],"image/rankingBase.png"),setImage(div_rankingPick[n],"image/rankingPick.webp"),setText(div_rankingClass[n],rankNumber[n]+1),setText(div_rankingScore[n],scoreRankingDisplay(ranking[startMinute][n].score)),setImage(div_rankingChara[n],"image/"+ranking[startMinute][n].theme+"/down0.webp"),0===ranking[startMinute][n].time?setText(div_rankingScoreBase[n],ranking[startMinute][n].date+"<br>最後までクリアー"):setText(div_rankingScoreBase[n],ranking[startMinute][n].date+"<br>残りタイム　"+timeTextDisplay(ranking[startMinute][n].time)),Remove(div_rankingAlert)):null!==i&&null!==o&&n<o.length?(setImage(div_rankingBase[n],"image/rankingBase.png"),setImage(div_rankingPick[n],"image/rankingPick.webp"),o[n].rank+1<=9999?setText(div_rankingClass[n],o[n].rank+1):Remove(div_rankingClass[n]),setText(div_rankingScore[n],scoreRankingDisplay(o[n].score)),setImage(div_rankingChara[n],"image/"+o[n].mTheme+"/down0.webp"),a=escape(o[n].name),o[n].svTime===60*startMinute?setText(div_rankingScoreBase[n],a+"<br>最後までクリアー"):setText(div_rankingScoreBase[n],a+"<br>残りタイム　"+o[n].timeDisplay),Remove(div_rankingAlert)):(null!==i&&null!==o||0!==n||setText(div_rankingAlert,"データがありません"),Remove(div_rankingBase[n]),Remove(div_rankingPick[n]),Remove(div_rankingClass[n]),Remove(div_rankingScore[n]),Remove(div_rankingChara[n]),Remove(div_rankingScoreBase[n]))}let e;setButton(e=socket?6:3),xy_Button(0,["50%","73%"]),xy_Button(1,["30%",932]),xy_Button(2,[485,55]),xy_Button(3,["10%","80%"]),xy_Button(4,["90%","80%"]),xy_Button(5,["70%",932]),0===netType&&socket?button[5].opacity=0:button[5].opacity=1,0!==netType?button[2].opacity=0:button[2].opacity=1,div_button[2].style.opacity=button[2].opacity,div_button[5].style.opacity=button[5].opacity,tapButton(0,()=>{soundCh[1]="ogg/se/select.ogg",startMinute=2===startMinute?5:2}),tapButton(1,()=>{soundCh[1]="ogg/se/confirm.ogg",nextScene="title"}),tapButton(2,()=>{soundCh[1]="ogg/se/confirm.ogg",dataDelete()}),tapButton(3,()=>{soundCh[1]="ogg/se/select.ogg",netType--}),tapButton(4,()=>{soundCh[1]="ogg/se/select.ogg",netType++}),tapButton(5,()=>{soundCh[1]="ogg/se/select.ogg",netSeasonType++}),4<=netType?netType=0:netType<0&&(netType=3)===netType&&(null===i||null!==i&&null===i.your)&&(netType=2),3===netType&&(null===i||null!==i&&null===i.your)&&(netType=0),2<=netSeasonType&&(netSeasonType=0),setImage(div_button[0],"image/button/"+startMinute+"mButton.webp"),setImageWidth(div_button[1],"image/button/backButton.webp",120),setImageWidth(div_button[2],"image/button/clearButton.png",100),socket&&(setImageWidth(div_button[3],"image/button/select0.png",82),setImageWidth(div_button[4],"image/button/select1.png",82),setImageWidth(div_button[5],"image/button/"+seasonCode[netSeasonType]+".png",100),0===netType?(Remove(div_rankingNaviSeason),putXY(div_rankingNavi,"50%","80%")):(0===netSeasonType?setText(div_rankingNaviSeason,"すべて"):1===netSeasonType&&setText(div_rankingNaviSeason,seasonMonth+"月"),putXY(div_rankingNavi,"32%","80%")),setText(div_rankingNavi,netTypeTxt[netType]),setText(div_rankingNavi2,netTypeNavi[netType])),setImageWidth(div_bg,"image/menuRanking2.webp",540)}socketOn("sendRanking",e=>{onlineRanking=e[0],seasonYear=e[1]%100,seasonMonth=e[2]});let rankingSaveData=null,ranking=[];function rankingLoad(){if(null===(rankingSaveData=load_saveData("boomerangSurvivorMobile_345626737131"))){ranking[2]=[],ranking[5]=[];for(let t=0;t<5;t++){let e;e=socket?[[1e5,6e4,4e4,2e4,5e3],[2e5,12e4,8e4,4e4,1e4]]:[[2e5,12e4,8e4,4e4,1e4],[4e5,24e4,16e4,8e4,2e4]],ranking[2][t]={date:"--",score:e[0][t],time:120,theme:"maple"},ranking[5][t]={date:"--",score:e[1][t],time:300,theme:"maple"}}}else{ranking=JSON.parse(rankingSaveData);for(let e=0;e<5;e++)ranking[2][e].date=correctDateString(ranking[2][e].date),ranking[5][e].date=correctDateString(ranking[5][e].date),ranking[2][e].theme||(ranking[2][e].theme="maple"),ranking[5][e].theme||(ranking[5][e].theme="maple");save_saveData("boomerangSurvivorMobile_345626737131",rankingSaveData=jSON_data(ranking))}}function correctDateString(t){let n;if("--"===t||"-- "===t)n="--";else{var t=t.split(" "),a=t[0],t=t.slice(1).join(" "),a=a.split("-"),i=a[0],o=a[1];let e=a[2];1===e.length&&(e="0"+e),n=i+"-"+o+"-"+e+" "+t}return n}function rankingCheck(){let t=null;for(let e=0;e<5;e++)if(score>ranking[startMinute][e].score){t=e,yourRank=t+1;break}if(null!==t){for(let e=4;0<=e;e--){if(t===e){ranking[startMinute][e]={},ranking[startMinute][e].date=displayDate(1),ranking[startMinute][e].score=score,ranking[startMinute][e].time=time.p,ranking[startMinute][e].theme=mapleTheme;break}ranking[startMinute][e]=jSON_data(ranking[startMinute][e-1])}save_saveData("boomerangSurvivorMobile_345626737131",ranking)}}function jSON_data(e){return JSON.parse(JSON.stringify(e))}function dataDelete(e){Swal.fire({title:"ローカルランキングのリセット",target:screen,html:"<p style=\"text-align: left; font-size:1.2em \">ローカルランキングをすべてリセットし、初期状態に戻します。<br><span style='font-weight: bold ;color: #FF0000;'>※一度リセットしたローカルランキングを復元することはできません。また、オンラインランキングの内容は削除できません。</span></p>",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"リセットする",cancelButtonText:"やっぱりやめる",confirmButtonColor:"#FF0000",cancelButtonColor:"#257EC9",background:swalWhite,color:swalBlack,didOpen:()=>{Swal.getPopup().style.borderRadius="50px";var e=document.querySelector(".swal2-confirm"),e=(e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.7em",e.style.color=swalWhite},showClass:{popup:`
            animate__animated
            animate__fadeInRight
            animate__faster
          `},hideClass:{popup:`
            animate__animated
            animate__fadeOutDown
            animate__faster
          `}}).then(e=>{e.isConfirmed?(soundCh[0]="ogg/se/confirm.ogg",Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutUp"),allDataDelete(),setTimeout(()=>{window.location.reload()},500)):(Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"))})}function sCustom(){-100===bs&&(load(["image/menu2.webp","image/button/clearButton.png"]),loadSound(["ogg/se/confirm.ogg","ogg/se/select.ogg"]),allButtonReset()),setButton(1),xy_Button(0,["50%",892]),tapButton(0,()=>{soundCh[1]="ogg/se/confirm.ogg",nextScene="title"}),setImageWidth(div_button[0],"image/button/backButton.webp",120),setImageWidth(div_bg,"image/menu2.webp",540)}rankingLoad();const div_gameStatus=createDiv("gameStatus"),div_timeIcon=(defaultSet(div_gameStatus,div_gameScreen),putXY(div_gameStatus,"0%","100%"),translate(div_gameStatus,Left,Bottom),div_gameStatus.style.zIndex=5e4,setImage(div_gameStatus,""),createDiv("timeIcon")),div_timeText=(defaultSet(div_timeIcon,div_gameStatus),putXY(div_timeIcon,"0%","100%"),translate(div_timeIcon,Left,Bottom),div_timeIcon.style.zIndex=5e4,div_timeIcon.style.overflow="hidden",setImage(div_timeIcon,""),createDiv("timeText"));defaultSet(div_timeText,div_gameStatus),putXY(div_timeText,60,"100%"),translate(div_timeText,Left,Bottom),fontSet(div_timeText,"sys","Higashi","40","bold","right"),textEdge(div_timeText,3,"sys"),div_timeText.style.zIndex=50001,setText(div_timeText,"");let time={p:0,k:0},startMinute=2,commaTime=0;function timeMove(){0==pause&&(time.k++,commaTime+=10,time.k>=fps)&&(time.k=0,time.p--)}function timeDisplay(){-100===bs&&(time={p:60*startMinute,k:-1},commaTime=0),0===bs&&(playerPlayState()&&timeMove(),setImage(div_timeIcon,"image/time.webp"),setText(div_timeText,timeTextDisplay(time.p)),time.p<=9?fontSet(div_timeText,"sys","Higashi","55","bold","right"):fontSet(div_timeText,"sys","Higashi","40","bold","right"))}function timeTextDisplay(e){let t;var n;return t=0<=e?(n=e%60,Math.floor(e/60)+":"+Math.floor(n/10)+n%10):"0:00"}function timeInfo(e){var t={};return t.m=Math.floor(e/60),t.s=e%60,t}const div_scoreText=createDiv("scoreText");defaultSet(div_scoreText,div_gameStatus),putXY(div_scoreText,"98%","100%"),translate(div_scoreText,Right,Bottom),fontSet(div_scoreText,"blue","Higashi","40","bold","right"),textEdge(div_scoreText,3,"blue"),div_scoreText.style.zIndex=50001,setText(div_scoreText,"");let score=0;function scoreDisplay(){-100===bs&&(score=0),0===bs&&setText(div_scoreText,scoreSet())}function scoreSet(){let e=score;return score<10&&(e="0"+score),e=10485750<score?10485750:e}const div_speedIcon=createDiv("speedIcon"),div_speedText=(defaultSet(div_speedIcon,div_gameStatus),putXY(div_speedIcon,"20%","4%"),translate(div_speedIcon,Left,Center),div_speedIcon.style.zIndex=5e4,div_speedIcon.style.transformOrigin="center left",setImage(div_speedIcon,""),createDiv("speedText")),div_attackIcon=(defaultSet(div_speedText,div_gameStatus),putXY(div_speedText,"31%","4%"),translate(div_speedText,Left,Center),fontSet(div_speedText,"sys","Higashi","40","bold","right"),textEdge(div_speedText,3,"sys"),div_speedText.style.zIndex=50001,setText(div_speedText,""),createDiv("attackIcon")),div_attackText=(defaultSet(div_attackIcon,div_gameStatus),putXY(div_attackIcon,"41%","4%"),translate(div_attackIcon,Left,Center),div_attackIcon.style.zIndex=5e4,div_attackIcon.style.transformOrigin="center left",setImage(div_attackIcon,""),createDiv("attackText")),div_heartIcon=(defaultSet(div_attackText,div_gameStatus),putXY(div_attackText,"52%","4%"),translate(div_attackText,Left,Center),fontSet(div_attackText,"sys","Higashi","40","bold","right"),textEdge(div_attackText,3,"sys"),div_attackText.style.zIndex=50001,setText(div_attackText,""),createDiv("heartIcon")),div_bigIcon=(defaultSet(div_heartIcon,div_gameStatus),putXY(div_heartIcon,"100%","4%"),translate(div_heartIcon,Right,Center),div_heartIcon.style.zIndex=5e4,div_heartIcon.style.transformOrigin="center right",setImage(div_heartIcon,""),createDiv("bigIcon"));function itemStatusDisplay(){0===bs&&(setImageWidth(div_speedIcon,"image/item/0s.png",50),setText(div_speedText,player.speedLevel),setImageWidth(div_attackIcon,"image/item/1s.png",50),setText(div_attackText,player.weaponLevel),setImageWidth(div_heartIcon,"image/item/2s.png",50),div_heartIcon.style.opacity=player.heart,setImageWidth(div_bigIcon,"image/item/3s.png",50),div_bigIcon.style.opacity=player.big)}defaultSet(div_bigIcon,div_gameStatus),putXY(div_bigIcon,"90%","4%"),translate(div_bigIcon,Right,Center),div_bigIcon.style.zIndex=5e4,div_bigIcon.style.transformOrigin="center right",setImage(div_bigIcon,"");const div_player=createDiv("player"),div_virtualVec=(defaultSet(div_player,div_gameScreen),putXY(div_player,"50%","100%"),div_player.style.transform="translate(-50%, -62px)",div_player.style.zIndex=0,div_player.style.overflow="hidden",setImage(div_player,""),createDiv("virtualVec")),shadowOpacity=(defaultSet(div_virtualVec,div_gameScreen),putXY(div_virtualVec,"50%","100%"),translate(div_virtualVec,Center,Center),div_virtualVec.style.zIndex=0,div_virtualVec.style.overflow="hidden",setImage(div_virtualVec,""),.5),div_pShadow=createDiv("pShadow");defaultSet(div_pShadow,div_gameScreen),putXY(div_pShadow,"50%","100%"),translate(div_pShadow,Center,Center),div_pShadow.style.zIndex=0,div_pShadow.style.opacity=shadowOpacity,div_pShadow.style.overflow="hidden",setImage(div_pShadow,"");let player={},playerFrame={},damage=(frameReset(playerFrame),0);function playerMove(){function e(e){player.stopState<10&&("!"!==player.lastVec?(player.virtualVec!==e&&(player.lastVecTime=0),player.lastVecTime++,player.virtualVec=e,3<=player.lastVecTime&&(player.lastVecTime=5,player.vec=e)):(player.vec=e,player.virtualVec=e))}null!==touchMark.x?(player.lx=player.x,touchMark.x>player.x&&playerPlayState()?("stop"===player.state&&frameReset(playerFrame),0===weapon.stop&&(e("right"),player.state="walk",player.x+=playerSpeed()),450<=player.x&&(player.x=450),touchMark.x<=player.x&&(player.x=touchMark.x)):touchMark.x<player.x&&playerPlayState()&&("stop"===player.state&&frameReset(playerFrame),0===weapon.stop&&(e("left"),player.state="walk",player.x-=playerSpeed()),player.x<=90&&(player.x=90),touchMark.x>=player.x)&&(player.x=touchMark.x),Math.abs(player.x-player.lx)<=playerSpeed()/4.5?(player.stopState++,10<=player.stopState&&(player.stopState=10,player.vec="up")):player.stopState=0,player.lastVec=player.vec):player.lastVec="!","miss"==player.state?1===pN?(0===playerFrame.p&&0===playerFrame.k&&load2(["image/"+mapleTheme+"/miss1.webp","image/"+mapleTheme+"/miss2.webp","image/"+mapleTheme+"/miss3.webp","image/"+mapleTheme+"/miss4.webp","image/"+mapleTheme+"/miss5.webp"]),animeFrameEnd(playerFrame,12,6,()=>{player.state="miss3"})):(player.h+=player.hv,player.hv-=.5,player.ht++,player.h<=0&&(player.h=0,player.state="miss2",player.ht=0)):"miss2"==player.state&&(player.ht++,player.ht>=1.4*fps)&&(player.state="miss3"),player.inv--,player.inv<=0&&(player.inv=0)}function playerDefault(){player={x:270,lx:270,y:510,h:0,hv:0,ht:0},1===cheatA[2]&&"game"===scene?(player.speedLevel=8,player.weaponLevel=8,player.big=1,player.heart=1):(player.speedLevel=1,player.weaponLevel=1,player.big=0,player.heart=0),player.state="stop",player.vec="up",player.lastVec="!",player.lastVecTime=0,player.virtualVec="up",player.inv=0,player.stopState=0,damage=0}function playerDisplay(){if(-100===bs&&playerDefault(),playerMove(),"walk"===player.state&&0==weapon.stop&&"up"!==player.vec?animeFrame(playerFrame,18,4):playerPlayState()&&(frameReset(playerFrame),player.vec="up"),putXY(div_player,player.x,player.y-player.h),div_player.style.zIndex=player_zIndex(),"miss"===player.state?1===pN?(setImage(div_player,"image/"+mapleTheme+"/miss"+playerFrame.p+".webp"),Remove(div_pShadow)):(setImage(div_player,"image/"+mapleTheme+"/miss0.webp"),setImage(div_pShadow,"image/shadow.png")):"miss2"===player.state?(setImage(div_player,"image/"+mapleTheme+"/miss1.webp"),setImage(div_pShadow,"image/shadow.png"),player.ht>=.6*fps&&(div_player.style.opacity=player.ht%2,div_pShadow.style.opacity=player.ht%2*shadowOpacity)):"miss3"===player.state?(Remove(div_player),Remove(div_pShadow),shift++,div_player.style.opacity=1,div_pShadow.style.opacity=shadowOpacity):(0<player.inv?(div_player.style.opacity=player.inv%2,div_pShadow.style.opacity=player.inv%2*shadowOpacity):(div_player.style.opacity=1,div_pShadow.style.opacity=shadowOpacity),setImage(div_player,"image/"+mapleTheme+"/"+player.vec+playerFrame.p+".webp"),setImage(div_pShadow,"image/shadow.png")),"walk"===player.state){let e=touchMark.x;450<=e?e=450:e<=90&&(e=90),null!==e&&e!==player.x&&(putXY(div_virtualVec,e,player.y),div_virtualVec.style.zIndex=zIndex(player,5),0===weapon.stop)&&0<=Math.abs(e-player.x)&&("left"==player.virtualVec||"right"==player.virtualVec)?(div_virtualVec.style.opacity=virtualVecOpacity(Math.abs(e-player.x)),setImageWidth(div_virtualVec,"image/walk_"+player.virtualVec+"Mini.png",60)):Remove(div_virtualVec)}else Remove(div_virtualVec);putXY(div_pShadow,player.x,player.y),div_pShadow.style.zIndex=gameZbase-10}function player_zIndex(){return zIndex(player,9)}function zIndex(e,t){e=10*Math.floor(e.y)+t;return e+=gameZbase}function playerSpeed(){return 2.5+.8*(player.speedLevel-1)}function playerPlayState(){return"stop"===player.state||"walk"===player.state}function virtualVecOpacity(e){let t=e/60;return t<=0?t=0:.7<=t&&(t=.7),t}function playerOut(){player.inv<=0&&(damage=1,0===player.heart?(player.state="miss",frameReset(playerFrame),player.hv=10,player.h=1,player.ht=0,"game"===scene&&(soundCh[8]="ogg/se/miss.ogg"),2===weapon.m&&(weapon.m=4)):1===player.heart&&(player.heart=0,player.inv=3*fps))}const div_finger=createDiv("finger"),div_fShadow=(defaultSet(div_finger,div_touchScreen),putXY(div_finger,"50%","50%"),translate(div_finger,Center,Center),div_finger.style.zIndex=1e3,setImage(div_finger,""),createDiv("fShadow"));defaultSet(div_fShadow,div_touchScreen),putXY(div_fShadow,"50%","50%"),translate(div_fShadow,Center,Center),div_fShadow.style.zIndex=999,div_fShadow.style.overflow="hidden",setImage(div_fShadow,"");let fing={};function fingerDefault(){fing.m=1,fing.x=270,fing.y=320,fing.h=70,fing.t=0}function finger(){1===fing.m&&(fing.h<=0?0===fing.t?(null===touchMark.x||null===touchMark.y?(touchMark.lx=fing.x,touchMark.ly=fing.y):(touchMark.lx=touchMark.x,touchMark.ly=touchMark.y),touchMark.x=fing.x,touchMark.y=fing.y,touchShot()):1!==fing.t||0!==weapon.m&&3!==weapon.m||(weapon.m=1,weapon.stop=5):(touchMark={x:null,y:null},"walk"==player.state&&(player.state="stop")),putXY(div_fShadow,fing.x,fing.y),putXY(div_finger,fing.x,fing.y-fing.h),setImageWidth(div_finger,"image/finger/f.webp",270),setImageWidth(div_fShadow,"image/finger/shadow.png",270))}function fingerDelete(){fing.m=0,Remove(div_finger),Remove(div_fShadow)}const div_weapon=createDiv("weapon");defaultSet(div_weapon,div_gameScreen),putXY(div_weapon,"50%","100%"),translate(div_weapon,Center,Center),div_weapon.style.zIndex=0,setImage(div_weapon,"");let weapon={m:0};const wSize=[1,1.5];function weaponMove(){1===weapon.m&&(playerPlayState()?(weapon.x=player.x,weapon.y=player.y,weapon.lx=player.x,weapon.ly=player.y,weapon.lcx=player.x,weapon.lcy=player.y,weapon.lv=player.weaponLevel-1,weapon.v=15.2*.77*Math.pow(1.12,weapon.lv),weapon.dv=.3696*Math.pow(1.12,weapon.lv),weapon.rotate=0,weapon.m=2,weapon.big=player.big,weapon.chain=1,weapon.opacity=1,weapon.chainHit=0,soundCh[0]="ogg/se/throw.ogg"):weapon.m=3),weapon.stop--,weapon.stop<=0&&(weapon.stop=0),2===weapon.m?(weapon.lx=weapon.x,weapon.ly=weapon.y,weapon.lcx=(weapon.x+weapon.lx)/2,weapon.lcy=(weapon.y+weapon.ly)/2,weapon.x=player.x,weapon.y-=weapon.v,weapon.v-=weapon.dv,weapon.rotate+=6,weapon.y>=player.y&&(weapon.m=3,0==weapon.chainHit)&&(chainHit=0)):4===weapon.m&&(weapon.opacity-=.1,weapon.opacity<=0)&&(weapon.m=0,(weapon.opacity=0)==weapon.chainHit)&&(chainHit=0),1e4!==touchNow&&3===weapon.m&&(weapon.m=0)}function weaponDefault(){weapon={m:0,x:0,y:0,v:0,dv:0,lv:0,rotate:0,stop:0,chain:0,opacity:1}}function weaponDisplay(){-100===bs&&weaponDefault(),weaponMove(),2===weapon.m||4===weapon.m?(putXY(div_weapon,weapon.x,weapon.y),div_weapon.style.zIndex=zIndex(weapon,8),transform(div_weapon,Center,Center,weapon.rotate,100*wSize[weapon.big]),div_weapon.style.opacity=weapon.opacity,setImage(div_weapon,"image/weapon.png")):0!==weapon.m&&3!==weapon.m||Remove(div_weapon)}function attack(e,t){var n=weapon.x,a=weapon.y,i=weapon.lcx,o=weapon.lcy,r=i-n,s=o-a,m=r*r+s*s;let l=-1;0!=m&&(l=((e-n)*r+(t-a)*s)/m);let d,g;g=l<0?(d=n,a):0<l?(d=i,o):(d=n+l*r,a+l*s);m=e-d,i=t-g;return Math.sqrt(m*m+i*i)}let div_item=[];const itemMax=6;for(let e=0;e<itemMax;e++)div_item[e]=createDiv("item"+e),defaultSet(div_item[e],div_gameScreen),putXY(div_item[e],100,100*e),translate(div_item[e],Center,Center),div_item[e].style.zIndex=0,setImage(div_item[e],"");let div_itemFrame=[];for(let e=0;e<itemMax;e++)div_itemFrame[e]=createDiv("itemFrame"+e),defaultSet(div_itemFrame[e],div_item[e]),putXY(div_itemFrame[e],"50%","50%"),translate(div_itemFrame[e],Center,Center),div_itemFrame[e].style.zIndex=1,setImage(div_itemFrame[e],"");let item=[],getItem=0,attackPhase=0;function itemDefault(){for(let e=0;e<itemMax;e++)item[e]={m:0,x:0,y:0,fx:0,v:0,t:0,r:0,time:0}}function itemDisplay(){-100===bs&&(itemDefault(),attackPhase=0,getItem=0),itemMove();for(let e=0;e<itemMax;e++)1<=item[e].m?(putXY(div_item[e],item[e].x,item[e].y),div_item[e].style.zIndex=zIndex(item[e],7),4===item[e].t||5===item[e].t?setImageWidth(div_item[e],"image/"+itemTheme+"/"+item[e].t+".png",40):setImageWidth(div_item[e],"image/item/"+item[e].t+".png",40),setImageWidth(div_itemFrame[e],"image/item/f.png",40),item[e].time%10<5?div_itemFrame[e].style.opacity=0:div_itemFrame[e].style.opacity=1):(Remove(div_item[e]),Remove(div_itemFrame[e]))}function itemSet(e){item[e].v=.7*(2*Random(Seed(2+.7*e))+2),item[e].fx=Math.floor(340*Random(Seed(300+.7*e)))+100,item[e].x=item[e].fx,item[e].y=-30,item[e].m=1,item[e].time=0,item[e].r=Random(Seed(15+.7*e))*Math.PI*2}function itemMove(){if(time.p%10==5&&18===time.k&&playerPlayState())for(let e=0;e<itemMax;e++)if(0===item[e].m){item[e].t=(Math.floor(time.p/10)+1)%2,1===item[e].t&&attackPhase++,itemSet(e);break}if(48===time.p&&26===time.k&&playerPlayState())for(let e=0;e<itemMax;e++)if(0===item[e].m){item[e].t=3,itemSet(e);break}if((76===time.p||211===time.p)&&33===time.k&&playerPlayState())for(let e=0;e<itemMax;e++)if(0===item[e].m){item[e].t=2,itemSet(e);break}if(0===bonus[0]&&(30<=chainHit&&2===startMinute||50<=chainHit&&5===startMinute)&&0===easy&&"game"===scene&&playerPlayState())for(let e=0;e<itemMax;e++)if(0===item[e].m){item[e].t=4,bonus[0]=.5,itemSet(e);break}if(6<=weapon.chain&&0===bonus[1]&&0===easy&&"game"===scene&&playerPlayState())for(let e=0;e<itemMax;e++)if(0===item[e].m){item[e].t=5,bonus[1]=.5,itemSet(e);break}for(let e=0;e<itemMax;e++)1===item[e].m&&(item[e].time++,item[e].y+=item[e].v,item[e].r+=.02*item[e].v,item[e].x=30*Math.sin(item[e].r)+item[e].fx,Vector(player.x,player.y,item[e].x,item[e].y).z<=27||attack(item[e].x,item[e].y)<20*wSize[weapon.big]&&2===weapon.m)&&playerPlayState()&&(attack(item[e].x,item[e].y)<20*wSize[weapon.big]&&2===weapon.m&&0==weapon.chainHit&&(weapon.chainHit=1,chainHit++),item[e].m=0,soundCh[1]="ogg/se/item.ogg",getItem++,0===item[e].t?(player.speedLevel++,0===easy&&(score+=10),8<=player.speedLevel&&(player.speedLevel=8)):1===item[e].t?(player.weaponLevel++,0===easy&&(score+=100),8<=player.weaponLevel&&(player.weaponLevel=8)):3===item[e].t?(player.big=1,0===easy&&(score+=200)):2===item[e].t?(player.heart=1,0===easy&&(score+=0)):4===item[e].t?0===easy&&(score+=2e4,bonus[0]=1):5===item[e].t&&0===easy&&(score+=1e4,bonus[1]=1)),660<=item[e].y&&(item[e].m=0)}let div_enemy=[];for(let e=0;e<25;e++)div_enemy[e]=createDiv("enemy"+e),defaultSet(div_enemy[e],div_gameScreen),putXY(div_enemy[e],100,100*e),translate(div_enemy[e],Center,Center),div_enemy[e].style.zIndex=0,div_enemy[e].style.mixBlendMode="normal",setImage(div_enemy[e],"");let div_enemyShadow=[];for(let e=0;e<25;e++)div_enemyShadow[e]=createDiv("enemyShadow"+e),defaultSet(div_enemyShadow[e],div_gameScreen),putXY(div_enemyShadow[e],100,100*e),translate(div_enemyShadow[e],Center,Center),div_enemyShadow[e].style.zIndex=0,div_enemyShadow[e].style.opacity=shadowOpacity,div_enemyShadow[e].style.mixBlendMode="normal",setImage(div_enemyShadow[e],"");let enemyScore=[],div_enemyScore=[];for(let e=0;e<25;e++)div_enemyScore[e]=createDiv("enemyScore"+e),defaultSet(div_enemyScore[e],div_gameScreen),putXY(div_enemyScore[e],200,100*e),translate(div_enemyScore[e],Center,Center),fontSet(div_enemyScore[e],"#FFFFFF","Higashi","25","bold","right"),textEdge(div_enemyScore[e],3,"#27C3C7"),div_enemyScore[e].style.zIndex=50010,setText(div_enemyScore[e],"");function lvSpeed(e){let t;return t="game"===scene?[1,.75][e]:1}let maxEnemy=5,maxEnemyKind=[],defeatEnemy=0;function phase(){var t=60*startMinute;let n=0;for(let e=0;e<17;e++)if(time.p<=(e+1)/17*t){n=e;break}return n=16-n}let enemy=[],enemyFrame=[],enemyKind=0;const eFSpeed=[24,20,22,18],eFN=[2,4,4,3],eScore=[[200,10],[300,100],[500,200],[300,100]];function orVec(e){let t;return 0===e?t="left":1===e&&(t="right"),t}function enemyDefault(){for(let e=0;e<25;e++)enemy[e]={m:0,x:0,y:0,vec:0,dVec:"none",mVec:"right",type:0,rotate:0},enemyFrame[e]={p:0,k:0},enemyScore[e]={m:0,f:0}}function enemyDisplay(){-100===bs&&(enemyDefault(),defeatEnemy=0),enemyMove();for(let e=0;e<25;e++)2===enemy[e].m||50===enemy[e].m?(4!==enemy[e].type&&animeFrame(enemyFrame[e],eFSpeed[enemy[e].type],eFN[enemy[e].type]),putXY(div_enemy[e],enemy[e].x,enemy[e].y),4!==enemy[e].type?div_enemy[e].style.zIndex=zIndex(enemy[e],6):div_enemy[e].style.zIndex=zIndex(player,6),transform(div_enemy[e],Center,Center,enemy[e].rotate,100),0===enemy[e].type?setImage(div_enemy[e],"image/enemy/"+enemy[e].type+"_"+enemyFrame[e].p+usaraTheme+".webp"):setImage(div_enemy[e],"image/enemy/"+enemy[e].type+"_"+enemyFrame[e].p+".webp"),4===enemy[e].type?1===enemy[e].twinkle?(putXY(div_enemyShadow[e],enemy[e].x,enemy[e].y),div_enemyShadow[e].style.zIndex=gameZbase-10,div_enemyShadow[e].style.opacity=enemy[e].twinkleTime%2,setImageWidth(div_enemyShadow[e],"image/enemy/4allow.webp",40),transform(div_enemyShadow[e],Center,Center,calculateTwinkle(e),100)):(div_enemyShadow[e].style.opacity=shadowOpacity,Remove(div_enemyShadow[e])):(putXY(div_enemyShadow[e],enemy[e].x,enemy[e].y),div_enemyShadow[e].style.zIndex=gameZbase-10,translate(div_enemyShadow[e],Center,Center),div_enemyShadow[e].style.opacity=shadowOpacity,setImage(div_enemyShadow[e],"image/shadow.png"))):100===enemy[e].m?(putXY(div_enemy[e],enemy[e].x,enemy[e].y),div_enemy[e].style.zIndex=zIndex(enemy[e],6),0===enemy[e].type?setImage(div_enemy[e],"image/enemy/"+enemy[e].type+"_D"+usaraTheme+".webp"):setImage(div_enemy[e],"image/enemy/"+enemy[e].type+"_D.webp"),4!==enemy[e].type&&(putXY(div_enemyShadow[e],enemy[e].x,enemy[e].y),div_enemyShadow[e].style.zIndex=gameZbase-10,setImage(div_enemyShadow[e],"image/shadow.png"))):101===enemy[e].m?(putXY(div_enemy[e],enemy[e].x,enemy[e].y),div_enemy[e].style.zIndex=zIndex(enemy[e],6),setImage(div_enemy[e],"image/enemy/D_"+enemyFrame[e].p+".webp"),Remove(div_enemyShadow[e])):0===enemy[e].m&&(Remove(div_enemy[e]),Remove(div_enemyShadow[e])),1<=enemyScore[e].m?(putXY(div_enemyScore[e],enemyScore[e].x,enemyScore[e].y),div_enemyScore[e].style.filter="brightness("+(1+enemyScore[e].f%2)+")",setText(div_enemyScore[e],enemyScore[e].score),div_enemyScore[e].style.zIndex=50010+enemyScore[e].score):Remove(div_enemyScore[e])}function enemyMove(){if(levelSet(),0===bs&&Random(Seed(.5))<.05&&screenEnemy()<maxEnemy&&"game"===scene)for(let e=0;e<25;e++)if(0===enemy[e].m){enemy[e].m=1;break}for(let e=0;e<25;e++)1===enemy[e].m?(enemy[e].m=2,enemy[e].rotate=0,selectEnemyKind(e),enemyFrame[e]={p:0,k:0},0===enemy[e].type?(enemy[e].vec=Math.floor(2*Random(Seed(24))),enemy[e].dVec="none",enemy[e].mVec=orVec(enemy[e].vec),"left"===enemy[e].mVec?enemy[e].x=600:enemy[e].x=-60,enemy[e].y=getRandomUsaraY(),enemy[e].v=1.7):1!==enemy[e].type&&2!==enemy[e].type&&3!==enemy[e].type&&4!==enemy[e].type||(1===enemy[e].type?(enemy[e].vec="down",enemy[e].dVec="none",enemy[e].mVec="down",enemy[e].v=2):2===enemy[e].type&&(enemy[e].vec=Math.floor(2*Random(Seed(24))),enemy[e].dVec="none",enemy[e].mVec=orVec(enemy[e].vec),enemy[e].v=Math.floor(4*Random(Seed(100)))+4),3===enemy[e].type?(enemy[e].vec="down",enemy[e].dVec="none",enemy[e].mVec="down",enemy[e].v=Math.floor(2*Random(Seed(100)))+2):4===enemy[e].type&&(enemy[e].twinkle=0,enemy[e].twinkleTime=0,enemy[e].v=3),enemy[e].x=Math.floor(360*Random(Seed(51)))+90,enemy[e].y=-30)):2===enemy[e].m?(0===enemy[e].type?"left"===enemy[e].mVec?enemy[e].x-=enemy[e].v*lvSpeed(easy):enemy[e].x+=enemy[e].v*lvSpeed(easy):1===enemy[e].type||2===enemy[e].type||3===enemy[e].type?("down"===enemy[e].mVec||2===enemy[e].type?enemy[e].y+=enemy[e].v*lvSpeed(easy):enemy[e].y-=enemy[e].v*lvSpeed(easy),2===enemy[e].type&&("left"===enemy[e].mVec?enemy[e].x-=.2*enemy[e].v*lvSpeed(easy):enemy[e].x+=.2*enemy[e].v*lvSpeed(easy))):4===enemy[e].type&&(0==enemy[e].twinkle?(enemy[e].y+=enemy[e].v,60<=enemy[e].y&&(enemy[e].y=60,enemy[e].rv=7,enemy[e].twinkle=1)):1==enemy[e].twinkle?(enemy[e].rotate+=enemy[e].rv,enemy[e].twinkleTime++,enemy[e].vx=12*Vector(enemy[e].x,enemy[e].y,player.x,player.y).x*lvSpeed(easy),enemy[e].vy=12*Vector(enemy[e].x,enemy[e].y,player.x,player.y).y*lvSpeed(easy),enemy[e].twinkleTime>=1.5*fps&&(enemy[e].twinkle=2,soundCh[7]="ogg/se/twinkle.ogg")):(enemy[e].rotate=0,enemy[e].x+=enemy[e].vx,enemy[e].y+=enemy[e].vy)),attack(enemy[e].x,enemy[e].y)<23*wSize[weapon.big]&&2==weapon.m&&enemy[e].y<540&&(4!==enemy[e].type?(enemy[e].m=100,enemyFrame[e]={p:0,k:0},soundCh[2]="ogg/se/defeatEnemy.ogg",enemyScore[e].score=eScore[enemy[e].type][easy]*weapon.chain,"game"===scene&&(enemyScore[e].m=1),score+=enemyScore[e].score,weapon.chain++,0==weapon.chainHit&&(weapon.chainHit=1,chainHit++),defeatEnemy++):enemyFrame[e].p=1),Vector(player.x,player.y,enemy[e].x,enemy[e].y).zz<30&&playerPlayState()&&0!==enemy[e].type&&enemy[e].y<540&&playerOut(),3===enemy[e].type&&"down"===enemy[e].mVec&&540<enemy[e].y&&"1"!=enemy[e].vec?(enemy[e].y=540,enemy[e].m=50):3===enemy[e].type&&"down"===enemy[e].mVec&&600<enemy[e].y&&"1"==enemy[e].vec&&(enemy[e].v=7,enemy[e].mVec="up"),(660<enemy[e].y||enemy[e].y<-60||600<enemy[e].x||enemy[e].x<-60)&&(enemy[e].m=0)):50===enemy[e].m?(player.x<enemy[e].x?enemy[e].x-=3:player.x>enemy[e].x&&(enemy[e].x+=3),Math.abs(player.x-enemy[e].x)<=10&&(enemy[e].m=2,enemy[e].vec="1")):100===enemy[e].m?animeFrameEnd(enemyFrame[e],3,4,()=>{enemy[e].m=101}):101===enemy[e].m&&animeFrameEnd(enemyFrame[e],8,3,()=>{enemy[e].m=0}),1<=enemyScore[e].m&&(1===enemyScore[e].m?(enemyScore[e].x=enemy[e].x,enemyScore[e].y=enemy[e].y-30,enemyScore[e].f=0,enemyScore[e].m=2):(enemyScore[e].y-=.5,enemyScore[e].f++),0===enemy[e].m)&&(enemyScore[e].m=0)}function screenEnemy(){let t=0;for(let e=0;e<25;e++)0!==enemy[e].m&&t++;return t}function getRandomUsaraY(){let e;var t=60*(e=attackPhase<=1?5:attackPhase<=3?4:attackPhase<=5?3:attackPhase<=6?2:1)+30;return Math.floor(Random(Seed(32))*(450-t+1))+t}function selectEnemyKind(e){var t=[];for(let e=0;e<enemyKind;e++)screenEnemyKind(e)<maxEnemyKind[e]&&t.push(e);enemy[e].type=t[Math.floor(Random(Seed(88))*t.length)]}function screenEnemyKind(t){let n=0;for(let e=0;e<25;e++)0!==enemy[e].m&&enemy[e].type===t&&n++;return n}function levelSet(){0===easy?0==phase()?(enemyKind=1,maxEnemy=5,maxEnemyKind=[7,0,0,0,0]):1==phase()?(enemyKind=2,maxEnemy=7,maxEnemyKind=[4,4,0,0,0]):2==phase()?(enemyKind=2,maxEnemy=10,maxEnemyKind=[6,6,0,0,0]):3==phase()?(enemyKind=2,maxEnemy=10,maxEnemyKind=[3,9,0,0,0]):4==phase()?(enemyKind=3,maxEnemy=10,maxEnemyKind=[4,8,3,0,0]):5==phase()?(enemyKind=3,maxEnemy=10,maxEnemyKind=[3,5,4,0,0]):6==phase()?(enemyKind=3,maxEnemy=10,maxEnemyKind=[2,6,5,0,0]):7==phase()?(enemyKind=3,maxEnemy=12,maxEnemyKind=[1,5,8,0,0]):8==phase()?(enemyKind=1,maxEnemy=11,maxEnemyKind=[14,0,0,0,0]):9==phase()?(enemyKind=4,maxEnemy=5,maxEnemyKind=[4,0,0,3,0]):10==phase()?(enemyKind=4,maxEnemy=7,maxEnemyKind=[4,3,0,3,0]):11==phase()?(enemyKind=4,maxEnemy=9,maxEnemyKind=[5,3,3,3,0]):12==phase()?(enemyKind=4,maxEnemy=12,maxEnemyKind=[0,0,13,0,0]):13==phase()?(enemyKind=5,maxEnemy=12,maxEnemyKind=[5,3,1,3,1]):14==phase()?(enemyKind=5,maxEnemy=14,maxEnemyKind=[2,5,4,5,1]):15==phase()?(enemyKind=5,maxEnemy=17,maxEnemyKind=[4,6,5,5,2]):16==phase()&&(enemyKind=5,maxEnemy=22,maxEnemyKind=[2,6,8,6,2]):0==phase()?(enemyKind=1,maxEnemy=3,maxEnemyKind=[7,0,0,0,0]):1==phase()?(enemyKind=1,maxEnemy=5,maxEnemyKind=[7,0,0,0,0]):2==phase()?(enemyKind=2,maxEnemy=6,maxEnemyKind=[6,1,0,0,0]):3==phase()?(enemyKind=2,maxEnemy=6,maxEnemyKind=[6,2,0,0,0]):4==phase()?(enemyKind=2,maxEnemy=6,maxEnemyKind=[6,4,0,0,0]):5==phase()?(enemyKind=2,maxEnemy=7,maxEnemyKind=[5,4,0,0,0]):6==phase()?(enemyKind=2,maxEnemy=8,maxEnemyKind=[5,5,0,0,0]):7==phase()?(enemyKind=2,maxEnemy=9,maxEnemyKind=[4,6,0,0,0]):8==phase()?(enemyKind=1,maxEnemy=6,maxEnemyKind=[7,0,0,0,0]):9==phase()?(enemyKind=3,maxEnemy=3,maxEnemyKind=[4,2,1,0,0]):10==phase()?(enemyKind=3,maxEnemy=5,maxEnemyKind=[4,3,1,0,0]):11==phase()?(enemyKind=3,maxEnemy=6,maxEnemyKind=[4,4,1,0,0]):12==phase()?(enemyKind=3,maxEnemy=6,maxEnemyKind=[2,6,1,0,0]):13==phase()?(enemyKind=3,maxEnemy=7,maxEnemyKind=[2,7,1,0,0]):14==phase()?(enemyKind=3,maxEnemy=7,maxEnemyKind=[1,7,2,0,0]):15==phase()?(enemyKind=4,maxEnemy=7,maxEnemyKind=[1,7,0,1,0]):16==phase()&&(enemyKind=5,maxEnemy=8,maxEnemyKind=[8,0,0,0,1])}function calculateTwinkle(e){return-Math.atan2(enemy[e].vx,enemy[e].vy)*(180/Math.PI)}change_level=.15,k2ndTime=40,k3rdTime=8;const customMode=0;function sCheck(){-100===bs&&(loadSound(null),load(null)),0===bs&&0===shift&&(shift=1,Swal.fire({title:"確認",target:screen,html:'<p style="text-align: left; font-size:1.2em "><span style="font-weight: bold ;color: #396894;">'+resultAccident[9]+"</span><br><br>前回のリザルトデータが残っています。<br>再表示しますか？</p>",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"はい",cancelButtonText:"いいえ",confirmButtonColor:"#257EC9",cancelButtonColor:"#FF4274",background:swalWhite,color:swalBlack,reverseButtons:!0,didOpen:()=>{Swal.getPopup().style.borderRadius="50px";var e=document.querySelector(".swal2-confirm"),e=(e.style.fontWeight="bold",e.style.fontSize="1.4em",e.style.color=swalWhite,document.querySelector(".swal2-cancel"));e.style.fontWeight="bold",e.style.fontSize="1.1em",e.style.color=swalWhite},showClass:{popup:`
            animate__animated
            animate__fadeInRight
            animate__faster
          `},hideClass:{popup:`
            animate__animated
            animate__fadeOutDown
            animate__faster
          `}}).then(e=>{e.isConfirmed?(time.p=resultAccident[0],time.k=resultAccident[1],startMinute=resultAccident[2],score=resultAccident[3],yourRank=resultAccident[4],nameChange=resultAccident[5],dateInfo=resultAccident[6],sound=resultAccident[7],cheatA[2]=resultAccident[10],dateValue=resultAccident[11],onlineSet=resultAccident[13],onlineNowRank=resultAccident[14],onlineLastRank=resultAccident[15],1===sound&&setTimeout(()=>{loadSound2(["ogg/se/select.ogg"])},120),Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutLeft"),nextScene="result"):(Swal.getPopup().classList.remove("animate__fadeOutDown"),Swal.getPopup().classList.add("animate__fadeOutUp"),nextScene="title",delResultAccident())}))}const div_bg=createDiv("bg"),div_test=(defaultSet(div_bg,screen),putXY(div_bg,"50%","50%"),translate(div_bg,Center,Center),div_bg.style.zIndex=0,setImage(div_bg,""),createDiv("test")),div_test2=(defaultSet(div_test,screen),putXY(div_test,0,0),transform(div_test,Center,Center,0,100),div_test.style.zIndex=1001,setImage(div_test,""),createDiv("test2"));defaultSet(div_test2,screen),putXY(div_test2,500,500),transform(div_test2,Center,Center,0,100),div_test2.style.zIndex=1e3,setImage(div_test2,"");let test={x:100,y:100};function run(){"game"===scene?sGame():"title"===scene?sTitle():"ranking"===scene?sRanking():"result"===scene?sResult():"custom"===scene?sCustom():"check"===scene&&sCheck()}function load_saveData(e){let t=localStorage.getItem(e);var n;return null===t||void 0===t?t=null:/^[01]+$/.test(t)?(n=dataToLock(t),localStorage.setItem(e,n)):t=lockToData(t),null!==t&&(t=binaryToData(t)),console.log(e,t),t}function save_saveData(e,t){let n;t=dataToLock(dataToBinary(n="string"==typeof t?t:JSON.stringify(t)));localStorage.setItem(e,t)}function delete_saveData(e){localStorage.removeItem(e)}function allDataDelete(){delete_saveData("boomerangSurvivorMobile_345626737131"),delete_saveData("boomerangSurvivorMobile_846472726013"),delete_saveData("boomerangSurvivorMobile_462846472827"),delete_saveData("boomerangSurvivorMobile_946323748346"),delete_saveData("boomerangSurvivorMobile_279554320123")}function dataToBinary(e){e=new TextEncoder("utf-8").encode(e);return Array.from(e).map(e=>e.toString(2).padStart(8,"0")).join("")}function binaryToData(e){e=e.match(/.{1,8}/g).map(e=>parseInt(e,2));return new TextDecoder("utf-8").decode(new Uint8Array(e))}function dataToLock(e){return CryptoJS.AES.encrypt(e,"25639543").toString()}function lockToData(e){return CryptoJS.AES.decrypt(e,"25639543").toString(CryptoJS.enc.Utf8)}const screenWidth=540,screenHeight=1012;let screenLong,windowWidthBasic=(screenLong=screenWidth>=screenHeight?"width":"height",null),windowHeightBasic=null,windowWidth=window.innerWidth,windowHeight=window.innerHeight,screenScale=40;const rotate_switch=["0","0"];function monitorResize(){phoneCheck(),windowWidth=window.innerWidth,windowHeight=window.innerHeight,windowWidthBasic===windowWidth&&windowHeightBasic===windowHeight||(windowWidth/windowHeight<screenWidth/screenHeight||windowWidthBasic===windowWidth&&phone?screenScale=windowWidth/screenWidth*100:windowWidth/windowHeight>=screenWidth/screenHeight&&(screenScale=windowHeight/screenHeight*100),transform(screen,Center,Center,0,screenScale),windowWidthBasic=window.innerWidth,windowHeightBasic=window.innerHeight),setImage(screen,"sys/screen.webp")}function RemoveAll(){allDiv.forEach(e=>{Remove(e)})}window.addEventListener("touchstart",function(e){e.target.closest(".swal2-container")||e.preventDefault()},{passive:!1}),window.oncontextmenu=function(e){return e.stopPropagation(),!1};let adminCheck=prompt("管理者用パスワードを入力してください");function oneHourPassed(e,t){t-=e;return 36e5<=t||t<0}function redirectPC(){window.location.href="pcInformation/index.html"}adminCheck="boom4622"===adminCheck,phone||adminCheck?setTimeout(()=>{setInterval("move()",fps2)},10):setTimeout(()=>{redirectPC()},500),0===resultAccidentLoad&&(resultAccident=JSON.parse(resultAccident),resultAccidentLoad=1),null===resultAccident||Array.isArray(resultAccident)&&void 0===resultAccident[11]||oneHourPassed(resultAccident[11],dateValue)||resultAccident[12]!==pN?(nextScene="title",delResultAccident()):nextScene="check";